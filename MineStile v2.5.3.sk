on rightclick on sign: #If you have several events &c&lUsing the same trigger, chain them with if..else if..else is better
    #Always document your code to ensure readability.
	
	# Card Issue #
	if line 1 of the clicked block is "[MineStileCI]":
	
		if {wait.%player%} is true:
			stop		
		set {wait.%player%} to true
		
		if player is not holding a Gray Dye:
			if player's inventory contain a name tag of unbreaking 5 named "%player%'s SmartCard":
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to ""
				set line 3 of the clicked block to "&c&l你已擁有智能卡"
				set line 4 of the clicked block to "&c&l不能重新發卡"
				message "<white>[MineStile <red>ERROR<white>] Failed to issue new card for %player%. REASON: The player already has a card. Action performed by %player%" to console
			else if player's balance is less than 1:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to ""
				set line 3 of the clicked block to "&c&l發卡失敗"
				set line 4 of the clicked block to "&c&l金錢不足"
				message "<white>[MineStile <red>ERROR<white>] Failed to issue new card for %player%. REASON: Insufficient Money. Action performed by %player%" to console
			else:
				give player a name tag of unbreaking 5 named "%player%'s SmartCard"
				remove 150 from player's money
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to "&a&l發卡成功"
				set line 3 of the clicked block to "&a&l費用: $150"
				set line 4 of the clicked block to "&a&l剩餘金錢: %player's balance%"
				message "<white>[MineStile INFO] New Card Issued to %player%, action performed by %player%" to console
				if {balance.%player%} is not set:
					set {balance.%player%} to 100
			wait 3 second
			set line 1 of the clicked block to "[MineStileCI]"
			set line 2 of the clicked block to "&d&l自動發卡器"
			set line 3 of the clicked block to "&a&l請按此"
			set line 4 of the clicked block to "&6&lMineStile"
		delete {wait.%player%}
	# Card Issue #
		
	# Cancel #
	distance between the player and clicked block is larger than 3:
		stop
	# Cancel #
		
	# Query Sign #
	if line 1 of the clicked block is "[MineStileQ]": 
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			if {wait.%player%} is true:
				stop		
			set {wait.%player%} to true
			if name of player's tool doesn't contain player's name:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to ""
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to check card info but failed. REASON: illegal card usage." to console
				wait 3 second
				set line 1 of the clicked block to "[MineStileQ]"
				set line 3 of the clicked block to "&a&l請拍卡"
				set line 4 of the clicked block to "&6&lMineStile"
				stop
			execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
			set line 1 of the clicked block to "&d&l智能卡:"
			set line 2 of the clicked block to "&a&l本卡餘額 :"
			if {balance.%player%} is smaller than 1:
				set line 3 of the clicked block to "&c&l$%{balance.%player%}%"
			else:
				set line 3 of the clicked block to "&a&l$%{balance.%player%}%"
			set line 4 of the clicked block to "&d&l1/4"
			wait 3 second
			set line 2 of the clicked block to "&a&l最近入閘區域: %{enter.%player%::1}%"
			set line 3 of the clicked block to "&a&l最近出閘區域: %{exit.%player%::1}%"
			set line 4 of the clicked block to "&d&l2/4"		
			wait 3 second
			set line 2 of the clicked block to "&l交易記錄於&a&l最後&r&l顯示"
			set line 3 of the clicked block to "&a&l剩餘免費車程: %{ticket.%player%}%"	
			set line 4 of the clicked block to "&d&l3/4"
			wait 3 second
			if {free.%player%} is not set: #Use else if to prevent unexpected outputs (Skipping non-correct ones) and to speed up
				set line 2 of the clicked block to "&6&l可免費乘車 : &c&l否"
			else if {free.%player%} is true:
				set line 2 of the clicked block to "&6&l可免費乘車 : &a&l是"		
			if {staff.%player%} is not set:
				set line 3 of the clicked block to "&6&l職員 : &c&l否"
			else if {staff.%player%} is true:
				set line 3 of the clicked block to "&6&l職員 : &a&l是"
			set line 4 of the clicked block to "&d&l4/4"	
			wait 3 second
			message "最近交易記錄: (最近起計)"
			if {deducted.%player%::1} is smaller than 1:
				if {deducted.%player%::6} is smaller than 1:
					message "第 1 筆: &c&l-$%(-1) * {deducted.%player%::1}% 第 6 筆: &c&l-$%(-1) * {deducted.%player%::6}%"
				else:
					message "第 1 筆: &c&l-$%(-1) * {deducted.%player%::1}% 第 6 筆: &a&l+$%{deducted.%player%::6}%"
			else:
				if {deducted.%player%::6} is smaller than 1:
					message "第 1 筆: &a&l+$%{deducted.%player%::1}% 第 6 筆: &c&l-$%(-1) * {deducted.%player%::6}%"
				else:
					message "第 1 筆: &a&l+$%{deducted.%player%::1}% 第 6 筆: &a&l+$%{deducted.%player%::6}%"
			if {deducted.%player%::2} is smaller than 1:
				if {deducted.%player%::7} is smaller than 1:
					message "第 2 筆: &c&l-$%(-1) * {deducted.%player%::2}% 第 7 筆: &c&l-$%(-1) * {deducted.%player%::7}%"
				else:
					message "第 2 筆: &c&l-$%(-1) * {deducted.%player%::2}% 第 7 筆: &a&l+$%{deducted.%player%::7}%"
			else:
				if {deducted.%player%::7} is smaller than 1:
					message "第 2 筆: &a&l+$%{deducted.%player%::2}% 第 7 筆: &c&l-$%(-1) * {deducted.%player%::7}%"
				else:
					message "第 2 筆: &a&l+$%{deducted.%player%::2}% 第 7 筆: &a&l+$%{deducted.%player%::7}%"
			if {deducted.%player%::3} is smaller than 1:
				if {deducted.%player%::8} is smaller than 1:
					message "第 3 筆: &c&l-$%(-1) * {deducted.%player%::3}% 第 8 筆: &c&l-$%(-1) * {deducted.%player%::8}%"
				else:
					message "第 3 筆: &c&l-$%(-1) * {deducted.%player%::3}% 第 8 筆: &a&l+$%{deducted.%player%::8}%"
			else:
				if {deducted.%player%::8} is smaller than 1:
					message "第 3 筆: &a&l+$%{deducted.%player%::3}% 第 8 筆: &c&l-$%(-1) * {deducted.%player%::8}%"
				else:
					message "第 3 筆: &a&l+$%{deducted.%player%::3}% 第 8 筆: &a&l+$%{deducted.%player%::8}%"
			if {deducted.%player%::4} is smaller than 1:
				if {deducted.%player%::9} is smaller than 1:
					message "第 4 筆: &c&l-$%(-1) * {deducted.%player%::4}% 第 9 筆: &c&l-$%(-1) * {deducted.%player%::9}%"
				else:
					message "第 4 筆: &c&l-$%(-1) * {deducted.%player%::4}% 第 9 筆: &a&l+$%{deducted.%player%::9}%"
			else:
				if {deducted.%player%::9} is smaller than 1:
					message "第 4 筆: &a&l+$%{deducted.%player%::4}% 第 9 筆: &c&l-$%(-1) * {deducted.%player%::9}%"
				else:
					message "第 4 筆: &a&l+$%{deducted.%player%::4}% 第 9 筆: &a&l+$%{deducted.%player%::9}%"
			if {deducted.%player%::5} is smaller than 1:
				if {deducted.%player%::10} is smaller than 1:
					message "第 5 筆: &c&l-$%(-1) * {deducted.%player%::5}% 第 10 筆: &c&l-$%(-1) * {deducted.%player%::10}%"
				else:
					message "第 5 筆: &c&l-$%(-1) * {deducted.%player%::5}% 第 10 筆: &a&l+$%{deducted.%player%::10}%"
			else:
				if {deducted.%player%::10} is smaller than 1:
					message "第 5 筆: &a&l+$%{deducted.%player%::5}% 第 10 筆: &c&l-$%(-1) * {deducted.%player%::10}%"
				else:
					message "第 5 筆: &a&l+$%{deducted.%player%::5}% 第 10 筆: &a&l+$%{deducted.%player%::10}%"
			set line 1 of the clicked block to "[MineStileQ]"
			set line 2 of the clicked block to "&d&l車票資訊查閱器"
			set line 3 of the clicked block to "&a&l請拍卡/車票"
			set line 4 of the clicked block to "&6&lMineStile"
			delete {wait.%player%}
		# Normal SmartCard #
		
		# Tickets #
		else if player is holding paper of Unbreaking 5:
			if {wait.%player%} is true:
				stop		
			set {wait.%player%} to true
			if name of player's tool is "Single Journey Ticket -E":
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 1 of the clicked block to "&6&l車票資訊:"
				set line 2 of the clicked block to ""
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "1/1"	
			else if name of player's tool is "Single Journey Ticket":
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				set line 1 of the clicked block to "&d&l單程票:"
				set line 2 of the clicked block to "&a&l適用入閘區域: %1 first characters of line 1 of player's tool's lore%"
				set line 3 of the clicked block to "&a&l適用出閘區域: %1 Last characters of line 1 of player's tool's lore%"
				set line 4 of the clicked block to "&d&l1/1"
			else if name of player's tool is "Exit-Only Ticket":
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				set line 1 of the clicked block to "&d&l出閘專用票:"
				set line 2 of the clicked block to "&a&l適用出閘區域: %1 Last characters of line 1 of player's tool's lore%"
				set line 3 of the clicked block to ""
				set line 4 of the clicked block to "&d&l1/1"
			wait 3 seconds
			set line 1 of the clicked block to "[MineStileQ]"
			set line 2 of the clicked block to "&d&l車票資訊查閱器"
			set line 3 of the clicked block to "&a&l請拍卡/車票"	
			set line 4 of the clicked block to "&6&lMineStile"	
			delete {wait.%player%}
		
		# Tickets #
		
	# Query Sign #
	
	# Add Value $50 #
	else if line 1 of the clicked block is "[MineStileV50]": #Again, use proper statements for easier debugging, you can also use event-block.
		
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			if {wait.%player%} is true:
				stop		
			set {wait.%player%} to true
			set line 1 of the clicked block to ".MineStileV50."
			if player's balance is less than 1: #You can choose to use player's or event-player's for safety
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to "" #!!! Stop &c&lUsing block, you are playing with fire !!!!#
				set line 3 of the clicked block to "&c&l增值失敗"
				set line 4 of the clicked block to "&c&l金錢不足"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to add $50 to the card but failed. REASON: Insufficient money." to console
				#!! Use else instead of stop trigger !! This is not beautiful code. Moreover, stop is enough #
			else:
				add 50 to {balance.%player%}
				remove 50 from player's money #Be consistent, if you use player's money above, use here too.#
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to "&a&l增值成功"
				set line 3 of the clicked block to "&d&l新餘額: &a&l$%{balance.%player%}%"
				set line 4 of the clicked block to "&6&l剩餘金錢: &a&l%player's money%"
				message "<white>[MineStile INFO] Player %player% added $50 to the card, new balance: $%{balance.%player%}%" to console
				set {deducted.%player%::10} to {deducted.%player%::9}
				set {deducted.%player%::9} to {deducted.%player%::8}
				set {deducted.%player%::8} to {deducted.%player%::7}
				set {deducted.%player%::7} to {deducted.%player%::6}
				set {deducted.%player%::6} to {deducted.%player%::5}
				set {deducted.%player%::5} to {deducted.%player%::4}
				set {deducted.%player%::4} to {deducted.%player%::3}
				set {deducted.%player%::3} to {deducted.%player%::2}
				set {deducted.%player%::2} to {deducted.%player%::1}
				set {deducted.%player%::1} to 50
			wait 5 second
			set line 1 of the clicked block to "[MineStileV50]"
			set line 2 of the clicked block to "&l增值金額: &a&l$50"
			set line 3 of the clicked block to "&d&l車票增值器 &a&l請拍卡"
			set line 4 of the clicked block to "&6&lMineStile"
			delete {wait.%player%}
		# Normal SmartCard #
		
	# Add Value $50 #

	# Add Value $100 #
	else if line 1 of the clicked block is "[MineStileV100]":
		
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			if {wait.%player%} is true:
				stop		
			set {wait.%player%} to true
			set line 1 of the clicked block to ".MineStileV100."
			if player's balance is less than 1:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to ""
				set line 3 of the clicked block to "&c&l增值失敗"
				set line 4 of the clicked block to "&c&l金錢不足"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to add $100 to the card but failed. REASON: Insufficient money." to console
			else:
				add 100 to {balance.%player%}
				remove 100 from player's money
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to "&a&l增值成功"
				set line 3 of the clicked block to "&d&l新餘額: &a&l$%{balance.%player%}%"
				set line 4 of the clicked block to "&6&l剩餘金錢: &a&l%player's money%"
				message "<white>[MineStile INFO] Player %player% added $100 to the card, new balance: $%{balance.%player%}%" to console
				set {deducted.%player%::10} to {deducted.%player%::9}
				set {deducted.%player%::9} to {deducted.%player%::8}
				set {deducted.%player%::8} to {deducted.%player%::7}
				set {deducted.%player%::7} to {deducted.%player%::6}
				set {deducted.%player%::6} to {deducted.%player%::5}
				set {deducted.%player%::5} to {deducted.%player%::4}
				set {deducted.%player%::4} to {deducted.%player%::3}
				set {deducted.%player%::3} to {deducted.%player%::2}
				set {deducted.%player%::2} to {deducted.%player%::1}
				set {deducted.%player%::1} to 100
			wait 5 second
			set line 1 of the clicked block to "[MineStileV100]"
			set line 2 of the clicked block to "&l增值金額: &a&l$100"
			set line 3 of the clicked block to "&d&l車票增值器 &a&l請拍卡"
			set line 4 of the clicked block to "&6&lMineStile"
			delete {wait.%player%}
		# Normal SmartCard #
		
	# Add Value $100 #
		
	# Staff Gates #
	else if line 1 of the clicked block contains "[MineStileStf":
		if line 1 of the clicked block contains "w":
			set {W.%player%} to true
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			if {staff.%player%} is true:
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&a&l請進入"
				set block below the clicked block to light green wool
				set block below the block behind the clicked block to redstone block # Be specific to not confuse the machine.
				if line 2 of clicked block contains ",S":
					message "<white>[MineStile INFO] Player %player% entered this staff area: %line 2 of clicked block%." to console
					loop blocks in radius 3 around the clicked block:
						if line 1 of loop-block or line 3 of loop-block contains "Stf":
							if line 2 of loop-block contains ",O":
								if line 3 of loop-block contains "Stf":
									set {I.%player%} to true
								else if line 1 of loop-block contains ".":
									set {D.%player%} to true
								set line 1 of loop-block to "[MineStileStf]"
								set line 3 of loop-block to "&a&l請離開"
								set line 4 of loop-block to "&6&lMineStile"
								set block below loop-block to light green wool
				else if line 2 of clicked block contains ",C":
					message "<white>[MineStile INFO] Player %player% exited CuC (%line 2 of clicked block%)." to console
					set line 3 of the clicked block to "&a&l請離開"
					loop blocks in radius 3 around the clicked block:
						if line 1 of loop-block or line 3 of loop-block contains "Key":
							if line 2 of loop-block is line 2 of clicked block:
								set line 1 of loop-block to "[MineStileKey]"
								set line 3 of loop-block to "&a&l請進入"
								set line 4 of loop-block to "&6&lMineStile"
								set block below loop-block to light green wool
						if line 1 of loop-block or line 3 of loop-block contains "CuC":
							if line 2 of loop-block is line 2 of clicked block:
								if line 3 of loop-block contains "CuC":
									set {I.%player%} to true
								else if line 1 of loop-block contains ".":
									set {D.%player%} to true
								set line 1 of loop-block to "[MineStileCuC]"
								set line 3 of loop-block to "&a&l請進入"
								set line 4 of loop-block to "&6&lMineStile"
								set block below loop-block to light green wool
				else if line 2 of clicked block contains ",G":
					message "<white>[MineStile INFO] Player %player% passed a luggage gate (%line 2 of clicked block%)." to console
				else if line 2 of clicked block contains ",O":
					message "<white>[MineStile INFO] Player %player% exited this staff area: %line 2 of clicked block%." to console
					set line 3 of the clicked block to "&a&l請離開"
					loop blocks in radius 3 around the clicked block:
						if line 1 of loop-block or line 3 of loop-block contains "Stf":
							if line 2 of loop-block contains ",S":
								if line 3 of loop-block contains "Stf":
									set {I.%player%} to true
								else if line 1 of loop-block contains ".":
									set {oD.%player%} to true
								set line 1 of loop-block to "[MineStileStf]"
								set line 3 of loop-block to "&a&l請進入"
								set line 4 of loop-block to "&6&lMineStile"
								set block below loop-block to light green wool
			else: #Never ever use 0 to detect non-existance. You are jamming up server space and threatens error for first-comers. Use 'if {variable.%player%} is not set:'
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l存取被拒"
				set block below the clicked block to red wool
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to enter/exit a staff area but failed. REASON: Not a staff." to console
			wait 3 second
			loop blocks in radius 3 around the clicked block:
				if line 1 of loop-block contains "Key":
					if line 2 of loop-block is line 2 of clicked block:
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "Key"
						set line 4 of loop-block to "&6&lMineStile"
						set block below loop-block to red wool
				if line 1 of loop-block contains "CuC":
					if line 2 of loop-block is line 2 of clicked block:
						if {I.%player%} is true:
							set line 1 of loop-block to "&c&l[暫停使用]"
							set line 3 of loop-block to "CuC"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to red wool
						else if {D.%player%} is true:
							set line 1 of loop-block to ".MineStileCuC."
							set line 3 of loop-block to "&a&l請進入"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to light green wool
						else:
							set line 1 of loop-block to "[MineStileCuC]"
							set line 3 of loop-block to "&c&l職員專用"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to black wool
				if line 1 of loop-block contains "Stf":
					if line 2 of loop-block contains ",S":
						if {D.%player%} is true:
							set line 1 of loop-block to ".MineStileStf."
							set line 3 of loop-block to "&a&l請進入"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to light green wool
						else if {I.%player%} is true:
							set line 1 of loop-block to "&c&l[暫停使用]"
							set line 3 of loop-block to "Stf"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to red wool
						else:
							set line 1 of loop-block to "[MineStileStf]"
							set line 3 of loop-block to "&c&l職員專用"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to black wool
					else if line 2 of loop-block contains ",O":
						if {oD.%player%} is true:
							set line 1 of loop-block to ".MineStileStf."
							set line 3 of loop-block to "&a&l請離開"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to light green wool
						else if {I.%player%} is true:
							set line 1 of loop-block to "&c&l[暫停使用]"
							set line 3 of loop-block to "Stf"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to red wool
						else:
							set line 1 of loop-block to "[MineStileStf]"
							set line 3 of loop-block to "&c&l職員專用"
							set line 4 of loop-block to "&6&lMineStile"
							set block below loop-block to black wool
			if {W.%player%} is true:
				set line 1 of clicked block to "[MineStileStfw]"
			else:
				set line 1 of clicked block to "[MineStileStf]"
			set line 3 of the clicked block to "&c&l職員專用"
			set line 4 of the clicked block to "&6&lMineStile"	
			set block below the clicked block to black wool #Not necessary, but good practice for fallback :)
			set block below the block behind the clicked block to black wool
			delete {I.%player%}
			delete {D.%player%}
			delete {oD.%player%}
			delete {W.%player%}
		# Normal SmartCard #
		
	# Staff Gates #
		
	# CuC Gates #
	else if line 1 of the clicked block is "[MineStileCuC]":
		
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			if {staff.%player%} is true:
				if {cucpw.%player%} is set:
					delete {cuc.%player%}
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
					set line 3 of the clicked block to ""
					loop 100 times:
						set block below the clicked block to yellow wool
						loop blocks in radius 3 around the clicked block:
							if line 1 of loop-block or line 3 of loop-block contains "Key":
								if line 2 of loop-block is line 2 of clicked block:
									set line 1 of loop-block to "[MineStileKey]"
									set line 3 of loop-block to "&a&l請輸入密碼"
									set line 4 of loop-block to "&6&lMineStile"
									set block below loop-block to light green wool
						if {cuc.%player%} is true:
							loop blocks in radius 3 around the clicked block:
								if line 1 of loop-block or line 3 of loop-block contains "Key":
									if line 2 of loop-block is line 2 of clicked block:
										set line 1 of loop-block to "[MineStileKey]"
										set line 3 of loop-block to "&a&l請進入"
										set line 4 of loop-block to "&6&lMineStile"
										set block below loop-block to light green wool
							set line 3 of the clicked block to "&a&l請進入"
							set line 4 of the clicked block to "&6&lMineStile"
							set block below the clicked block to light green wool
							set block below the block behind the clicked block to redstone block
							loop blocks in radius 3 around the clicked block:
								if line 1 of loop-block or line 3 of loop-block contains "Stf":
									if line 2 of loop-block is line 2 of clicked block:
										if line 2 of loop-block contains ",C":
											if line 3 of loop-block contains "Stf":
												set {I.%player%} to true
											else if line 1 of loop-block contains ".":
												set {D.%player%} to true
											set line 1 of loop-block to "[MineStileStf]"
											set line 3 of loop-block to "&a&l請離開"
											set line 4 of loop-block to "&6&lMineStile"
											set block below loop-block to light green wool
							execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
							wait 0.21 second
							execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
							wait 0.21 second
							execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
							wait 0.21 second
							delete {cuc.%player%}
							message "<white>[MineStile INFO] Player %player% entered a CuC." to console
							wait 2.37 second
							set line 3 of the clicked block to "&c&l職員專用"
							set line 4 of the clicked block to "&6&lMineStile"	
							set block below the clicked block to black wool #Not necessary, but good practice for fallback :)
							set block below the block behind the clicked block to black wool
							loop blocks in radius 3 around the clicked block:
								if line 1 of loop-block or line 3 of loop-block contains "Key":
									if line 2 of loop-block is line 2 of clicked block:
										set line 1 of loop-block to "&c&l[暫停使用]"
										set line 3 of loop-block to "Key"
										set line 4 of loop-block to "&6&lMineStile"
										set block below loop-block to red wool
								if line 1 of loop-block contains "Stf":
									if line 2 of loop-block is line 2 of clicked block:
										if line 2 of loop-block contains ",C":
											if {I.%player%} is true:
												set line 1 of loop-block to "&c&l[暫停使用]"
												set line 3 of loop-block to "Stf"
												set line 4 of loop-block to "&6&lMineStile"
												set block below loop-block to red wool
											else if {D.%player%} is true:
												set line 1 of loop-block to ".MineStileStf."
												set line 3 of loop-block to "&a&l請進入"
												set line 4 of loop-block to "&6&lMineStile"
												set block below loop-block to light green wool
											else:
												set line 1 of loop-block to "[MineStileStf]"
												set line 3 of loop-block to "&c&l職員專用"
												set line 4 of loop-block to "&6&lMineStile"
												set block below loop-block to black wool
							delete {I.%player%}
							delete {D.%player%}
							delete {wait.%player%}
							stop
						else if {cuc.%player%} is false:
							execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
							set line 3 of the clicked block to "&c&l存取被拒"
							set line 4 of the clicked block to "&c&l密碼錯誤"
							set block below the clicked block to red wool
							message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to enter a CuC but failed. REASON: Incorrect Password." to console
							loop blocks in radius 3 around the clicked block:
								if line 1 of loop-block or line 3 of loop-block contains "Key":
									if line 2 of loop-block is line 2 of clicked block:
										set line 1 of loop-block to "[MineStileKey]"
										set line 3 of loop-block to "&c&l存取被拒"
										set line 4 of loop-block to "&c&l密碼錯誤"
										set block below loop-block to red wool
							wait 3 second
							set line 3 of the clicked block to "&c&l職員專用"
							set line 4 of the clicked block to "&6&lMineStile"	
							set block below the clicked block to black wool #Not necessary, but good practice for fallback :)
							set block below the block behind the clicked block to black wool
							loop blocks in radius 3 around the clicked block:
								if line 1 of loop-block or line 3 of loop-block contains "Key":
									if line 2 of loop-block is line 2 of clicked block:
										set line 1 of loop-block to "&c&l[暫停使用]"
										set line 3 of loop-block to "Key"
										set line 4 of loop-block to "&6&lMineStile"
										set block below loop-block to red wool
							delete {wait.%player%}
							stop
						wait 0.1 second
						set block below the clicked block to black wool
						loop blocks in radius 3 around the clicked block:
							if line 1 of loop-block or line 3 of loop-block contains "Key":
								if line 2 of loop-block is line 2 of clicked block:
									set block below loop-block to red wool
						wait 0.1 second
						
					execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
					set line 3 of the clicked block to "&c&l存取被拒"
					set block below the clicked block to red wool
					message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to enter a CuC but failed. REASON: Not a staff." to console
				else:
					execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
					set line 3 of the clicked block to "&c&l請先設置密碼"
					set line 4 of the clicked block to "(/mcucpw <pw>x2)"
					set block below the clicked block to yellow wool
					message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to enter a CuC but failed. REASON: Password not set." to console
			else: #Never ever use 0 to detect non-existance. You are jamming up server space and threatens error for first-comers. Use 'if {variable.%player%} is not set:'
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l存取被拒"
				set block below the clicked block to red wool
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to enter a CuC but failed. REASON: Not a staff." to console
				loop blocks in radius 120 around the clicked block:
					if line 1 of loop-block is "[MineStileStat]":
						if line 1 of the clicked block contains line 3 of loop-block:
							if line 2 of loop-block is line 2 of clicked block:
								set line 4 of loop-block to "&d&lStat: &c&lDenied"
								set block behind loop-block to red wool
			wait 3 second
			set line 3 of the clicked block to "&c&l職員專用"
			set line 4 of the clicked block to "&6&lMineStile"	
			set block below the clicked block to black wool #Not necessary, but good practice for fallback :)
			set block below the block behind the clicked block to black wool
		# Normal SmartCard #
		
	# CuC Gates #
		
	# Free Rides Validator#
	else if line 1 of the clicked block is "[MineStileFV]":
		
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			if {wait.%player%} is true:
				stop		
			set {wait.%player%} to true
			if {free.%player%} is true:
				set line 2 of the clicked block to "&6&l此卡已持有"
				set line 3 of the clicked block to "&a&l免費乘車證"
				set line 4 of the clicked block to "&d&l不需再次確認"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to validate free ride but failed. REASON: Already validated/have free pass." to console
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				wait 3 second
			else if {ticket.%player%} is more than 0:
				set {free.%player%} to true
				subtract 1 from {ticket.%player%}
				set {ftvalidated.%player%} to true
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to "&d&l此卡已成功"
				set line 3 of the clicked block to "&a&l確認免費乘車"
				set line 4 of the clicked block to "&6&l免費車程餘下: &a&l%{ticket.%player%}%"
				message "<white>[MineStile INFO] Player %player% validated a free ride successfully, remaining free rides: %{ticket.%player%}%" to console
				wait 3 second
			else if {ticket.%player%} is 0:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 2 of the clicked block to "&c&l此卡並沒持有"
				set line 3 of the clicked block to "&c&l任何免費車程"
				set line 4 of the clicked block to ""
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to validate free ride but failed. REASON: No free rides remaining." to console
				wait 3 second
			set line 2 of the clicked block to "&d&l免費乘車確認器" 
			set line 3 of the clicked block to "&a&l請拍卡"
			set line 4 of the clicked block to "&6&lMineStile"	
			delete {wait.%player%}
			
		# Normal SmartCard #
		
	# Free Rides Validator#
		
	# (Wide) In Gates #
	else if line 1 of block is "[MineStileInN]" or "[MineStileInW]" or "[MineStileInL]" or "[MineStileInM]" or "[MineStileInWT]":
		
		if {wait.%player%} is true:
			stop		
		set {wait.%player%} to true
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			if name of player's tool doesn't contain player's name:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				if line 1 of block is "[MineStileInL]":
					set block behind the clicked block to red wool
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to ENTER the paid area at %line 2 of the clicked block% but failed. REASON: illegal card usage." to console
				wait 3 second
				if line 1 of the clicked block is "[MineStileInW]":
					set block below the block 3 blocks right clicked block to redstone block
					set block 3 blocks below the block 2 blocks right clicked block to red wool
				set line 3 of the clicked block to "&a&l請拍卡/車票"
				set line 4 of the clicked block to "&d&lMineStile"
				if line 1 of block is "[MineStileInN]" or "[MineStileInW]":
					set block below the clicked block to redstone block
					set block 3 blocks below the block 1 blocks right clicked block to red wool
				else if line 1 of block is "[MineStileInWT]":
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
					set block 3 blocks below the block 1 blocks right clicked block to red wool
					set block 3 blocks below the block 2 blocks right clicked block to red wool
				else:
					set block behind the clicked block to orange wool
				delete {wait.%player%}
				stop
		
			if {onstation.%player%} is true:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				if line 1 of block is "[MineStileInL]":
					set block behind the clicked block to red wool
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to ENTER the paid area at %line 2 of the clicked block% but failed. REASON: Anti pass-back." to console
				wait 3 second
				if line 1 of the clicked block is "[MineStileInW]":
					set block below the block 3 blocks right clicked block to redstone block
					set block 3 blocks below the block 2 blocks right clicked block to red wool
				set line 3 of the clicked block to "&a&l請拍卡/車票"
				set line 4 of the clicked block to "&d&lMineStile"
				if line 1 of block is "[MineStileInN]" or "[MineStileInW]":
					set block below the clicked block to redstone block
					set block 3 blocks below the block 1 blocks right clicked block to red wool
				else if line 1 of block is "[MineStileInWT]":
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
					set block 3 blocks below the block 1 blocks right clicked block to red wool
					set block 3 blocks below the block 2 blocks right clicked block to red wool
				else:
					set block behind the clicked block to orange wool
				delete {wait.%player%}
				stop
				
			if {balance.%player%} is smaller than 1:
				if {free.%player%} is not set:
					execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
					set line 3 of the clicked block to "&c&l餘額不足"
					set line 4 of the clicked block to "&c&l請增值"
					if line 1 of block is "[MineStileInL]":
						set block behind the clicked block to yellow wool
					message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to ENTER the paid area at %line 2 of the clicked block% but failed. REASON: Insufficient Value." to console
					wait 3 second
					if line 1 of the clicked block is "[MineStileInW]":
						set block below the block 3 blocks right clicked block to redstone block
						set block 3 blocks below the block 2 blocks right clicked block to red wool
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					if line 1 of block is "[MineStileInN]" or "[MineStileInW]":
						set block below the clicked block to redstone block
						set block 3 blocks below the block 1 blocks right clicked block to red wool
					else if line 1 of block is "[MineStileInWT]":
						set block below the block 3 blocks behind clicked block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
						set block 3 blocks below the block 1 blocks right clicked block to red wool
						set block 3 blocks below the block 2 blocks right clicked block to red wool
					else:
						set block behind the clicked block to orange wool
					delete {wait.%player%}
					stop
				
			set {enter.%player%::*} to line 2 of the clicked block split at ","
			message "<white>[MineStile INFO] Remaining Value: $%{balance.%player%}%" to console
			
			set line 3 of the clicked block to "&a&l請入閘"	
			set line 4 of the clicked block to "&d&l餘額:&a&l$%{balance.%player%}%"
			if line 1 of the clicked block is "[MineStileInL]" or "[MineStileInM]":
				set line 3 of the clicked block to "&a&l請上車"
				set block behind the clicked block to light green wool
			if {ftvalidated.%player%} is true:
				set line 4 of the clicked block to "&d&l免費車票餘下: &a&l%{ticket.%player%}%"
			if line 1 of block is "[MineStileInN]" or "[MineStileInW]":
				set block below the clicked block to light green wool
				set block 3 blocks below the block 1 blocks right clicked block to redstone block
				set block below the block 1 blocks right clicked block to air
			else if line 1 of block is "[MineStileInWT]":
				set block 3 blocks below the block 1 blocks right clicked block to redstone block
				set block 3 blocks below the block 2 blocks right clicked block to redstone block
				set block below the block 1 blocks right clicked block to air
				set block below the block 2 blocks right clicked block to air
			else:
				set block behind clicked block to light green wool
			if line 1 of block is "[MineStileInW]":
				set block below the block 3 blocks right clicked block to red wool
				set block 3 blocks below the block 2 blocks right clicked block to redstone block
				set block below the block 2 blocks right clicked block to air
			
			if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
				if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
					set {oI.%player%} to true
				set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
					
			else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
				set {oW.%player%} to true
				if line 3 of the block 3 blocks behind the block 3 blocks right clicked block doesn't contain "WT":
					if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
						set {oI.%player%} to true
					set block below the block 3 blocks behind clicked block to red wool
					set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
			
			if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileOutN]":
				set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
				set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
				set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool		
			else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileOutW]":
				set {oOutW.%player%} to true
				set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
				set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
				set block below the block 3 blocks behind clicked block to red wool
				set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
			else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileOutWT]":
				set {oOutWT.%player%} to true
				set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
				set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
			
			if {free.%player%} is true:
				if {staff.%player%} is true:
					message "<white>[MineStile INFO] <red>STAFF<white> %player% ENTERED paid area at %line 2 of the clicked block%" to console
				else:
					message "<white>[MineStile INFO] Player %player% ENTERED paid area at %line 2 of the clicked block% <yellow>WITH FREE PASS/FREE RIDE" to console
					set {onstation.%player%} to true
				if {balance.%player%} is smaller than 1:
					if line 1 of block is "[MineStileInN]" or "[MineStileInW]":
						set block below the clicked block to yellow wool
					else if line 1 of block is "[MineStileInL]" or "[MineStileInM]":
						set block behind clicked block to yellow wool
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
					wait 0.3 second
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.6"
					wait 0.3 second
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
				else:
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"	
				
			else:
				message "<white>[MineStile INFO] Player %player% ENTERED paid area at %line 2 of the clicked block%" to console
				set {onstation.%player%} to true
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"			
			
			set {InG.%player%} to true
			loop 11 times:
				if {InG.%player%} is not set:
					exit loop
				wait 0.5 second
			set line 3 of the clicked block to "&a&l請拍卡/車票"
			set line 4 of the clicked block to "&d&lMineStile"
			if line 1 of block is "[MineStileInN]" or "[MineStileInW]":
				set block below the clicked block to redstone block
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				set block below the block 1 blocks right clicked block to light weighted pressure plate
			else if line 1 of block is "[MineStileInWT]":
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 1 blocks right clicked block to light weighted pressure plate
				set block below the block 2 blocks right clicked block to light weighted pressure plate
			else:
				set block behind the clicked block to orange wool
			if {oI.%player%} is true:
				if {oW.%player%} is true:
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else:
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			if line 1 of clicked block is "[MineStileInW]":
				set block below the block 3 blocks right clicked block to redstone block
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 2 blocks right clicked block to light weighted pressure plate
			if line 3 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l請稍候對面乘客通過":
				set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
				set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "[MineStileOutN]"
				set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&a&l請拍卡/車票"
				set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			else if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l請稍候對面乘客通過":
				if {oOutW.%player%} is true:
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileOutW]"
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else if {oOutWT.%player%} is true:
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileOutWT]"
				set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
				
			delete {InG.%player%}
			delete {oI.%player%}
			delete {oW.%player%}
			delete {oOutW.%player%}
			delete {oOutWT.%player%}
			delete {wait.%player%}
		# Normal SmartCard #
		
		# Tickets #
		else if player is holding paper of Unbreaking 5:
							
			if name of player's tool is "Single Journey Ticket -E":
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				if line 1 of clicked block is "[MineStileInL]" or "[MineStileInM]":
					set block behind the clicked block to red wool
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to ENTER the paid area at %line 2 of the clicked block% but failed. REASON: Anti pass-back." to console
				
			else if name of player's tool is "Single Journey Ticket -E":
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				if line 1 of clicked block is "[MineStileInL]" or "[MineStileInM]":
					set block behind the clicked block to red wool
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to ENTER the paid area at %line 2 of the clicked block% but failed. REASON: Exit-Only Ticket is used." to console
				
			else if line 2 of clicked block contains 1 first characters of line 1 of player's tool's lore:
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&a&l請入閘"
				set line 4 of the clicked block to "&d&l多謝"
				if line 1 of the clicked block is "[MineStileInL]" or "[MineStileInM]":
					set line 3 of the clicked block to "&a&l請上車"	
				message "<white>[MineStile INFO] Player %player% ENTERED paid area at %line 2 of the clicked block% with SJC." to console
				if line 1 of block is "[MineStileInN]" or "[MineStileInW]":
					set block below the clicked block to light green wool
					set block 3 blocks below the block 1 blocks right clicked block to redstone block
					set block below the block 1 blocks right clicked block to air
				else if line 1 of block is "[MineStileInWT]":
					set block 3 blocks below the block 1 blocks right clicked block to redstone block
					set block 3 blocks below the block 2 blocks right clicked block to redstone block
					set block below the block 1 blocks right clicked block to air
					set block below the block 2 blocks right clicked block to air
				else:
					set block behind the clicked block to light green wool
				if line 1 of clicked block is "[MineStileInW]":
					set block below the block 3 blocks right clicked block to red wool
					set block 3 blocks below the block 2 blocks right clicked block to redstone block
					set block below the block 2 blocks right clicked block to air
				
				if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
					if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
						set {oI.%player%} to true
					set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
						
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
					set {oW.%player%} to true
					if line 3 of the block 3 blocks behind the block 3 blocks right clicked block doesn't contain "WT":
						if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
							set {oI.%player%} to true
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
				
				if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileOutN]":
					set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
					set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool		
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileOutW]":
					set {oOutW.%player%} to true
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
					set block below the block 3 blocks behind clicked block to red wool
					set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileOutWT]":
					set {oOutWT.%player%} to true
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"					
				set the name of player's tool to "Single Journey Ticket -E"
				
			else:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to ENTER the paid area at %line 2 of the clicked block% but failed. REASON: Not appropriate Entry Zone." to console
			
			set {InG.%player%} to true
			loop 11 times:
				if {InG.%player%} is not set:
					exit loop
				wait 0.5 second
			set line 3 of the clicked block to "&a&l請拍卡/車票"
			set line 4 of the clicked block to "&d&lMineStile"
			if line 1 of block is "[MineStileInN]" or "[MineStileInW]":
				set block below the clicked block to redstone block
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				set block below the block 1 blocks right clicked block to light weighted pressure plate
			else if line 1 of block is "[MineStileInWT]":
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 1 blocks right clicked block to light weighted pressure plate
				set block below the block 2 blocks right clicked block to light weighted pressure plate
			else:
				set block behind the clicked block to orange wool
			if {oI.%player%} is true:
				if {oW.%player%} is true:
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else:
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			if line 1 of clicked block is "[MineStileInW]":
				set block below the block 3 blocks right clicked block to redstone block
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 2 blocks right clicked block to light weighted pressure plate
				
			if line 3 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l請稍候對面乘客通過":
				set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
				set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "[MineStileOutN]"
				set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&a&l請拍卡/車票"
				set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			else if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l請稍候對面乘客通過":
				if {oOutW.%player%} is true:
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileOutW]"
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else if {oOutWT.%player%} is true:
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileOutWT]"
				set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
			
			delete {InG.%player%}
			delete {oI.%player%}
			delete {oW.%player%}
			delete {oOut.%player%}
			delete {oOutW.%player%}
			delete {wait.%player%}
		# Tickets #
		delete {wait.%player%}
	# (Wide) In Gates #
		
	# (Wide) Out Gates #
	else if line 1 of clicked block is "[MineStileOutN]" or "[MineStileOutW]" or "[MineStileOutL]" or "[MineStileOutM]" or "[MineStileOutWT]":
		
		if {wait.%player%} is true:
			stop
		set {wait.%player%} to true
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			
			if line 4 of the clicked block contains "&b&l不收費出閘":
				set {am.%player%} to true
				if line 4 of the clicked block contains "I":
					set {amI.%player%} to true
				if line 4 of the clicked block contains "D":
					set {amD.%player%} to true
				if line 4 of the clicked block contains "W":
					set {amW.%player%} to true
					
			if line 4 of the clicked block contains "&b&lMineStile":
				set {cl.%player%} to true
				if line 4 of the clicked block contains "IW.":
					set {I.%player%} to true
					set {W.%player%} to true
				if line 4 of the clicked block contains "DW.":
					set {D.%player%} to true
					set {W.%player%} to true
				if line 4 of the clicked block contains "I.":
					set {I.%player%} to true
				if line 4 of the clicked block contains "D.":
					set {D.%player%} to true
							
			if name of player's tool doesn't contain player's name:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to EXIT the paid area at %line 2 of the clicked block% but failed. REASON: illegal card usage." to console
				wait 3 second
				if line 1 of the clicked block is "[MineStileOutW]":
					set block below the block 3 blocks right clicked block to redstone block
					set block 3 blocks below the block 2 blocks right clicked block to red wool
				set line 3 of the clicked block to "&a&l請拍卡/車票"
				set line 4 of the clicked block to "&d&lMineStile"
				if {am.%player%} is true:
					if {amW.%player%} is true:
						if {amI.%player%} is true:
							set line 4 of the clicked block to "&b&l不收費出閘IW"
						else if {amD.%player%} is true:
							set line 4 of the clicked block to "&b&l不收費出閘DW"
						else:
							set line 4 of the clicked block to "&b&l不收費出閘"
					else:
						if {amI.%player%} is true:
							set line 4 of the clicked block to "&b&l不收費出閘I"
						else if {amD.%player%} is true:
							set line 4 of the clicked block to "&b&l不收費出閘D"
						else:
							set line 4 of the clicked block to "&b&l不收費出閘"
				else if {cl.%player%} is true:
					if {W.%player%} is true:
						if {I.%player%} is true:
							set line 4 of the clicked block to "&b&lMineStile IW."
						else if {D.%player%} is true:
							set line 4 of the clicked block to "&b&lMineStile DW."
						else:
							set line 4 of the clicked block to "&b&lMineStile"
					else:
						if {I.%player%} is true:
							set line 4 of the clicked block to "&b&lMineStile I."
						else if {D.%player%} is true:
							set line 4 of the clicked block to "&b&lMineStile D."
						else:
							set line 4 of the clicked block to "&b&lMineStile"
				if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
					set block below the clicked block to redstone block
					set block 3 blocks below the block 1 blocks right clicked block to red wool
				else if line 1 of block is "[MineStileOutWT]":
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
					set block 3 blocks below the block 1 blocks right clicked block to red wool
					set block 3 blocks below the block 2 blocks right clicked block to red wool
				else:
					set block behind the clicked block to green wool
				delete {am.%player%}
				delete {wait.%player%}
				delete {cl.%player%}
				delete {W.%player%}
				delete {I.%player%}
				delete {D.%player%}
				stop
			if line 1 of clicked block is not "[MineStileOutL]" or "[MineStileOutM]":
				if {staff.%player%} is not set:
					if {onstation.%player%} is not set:
						execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
						set line 3 of the clicked block to "&c&l車票失效"
						set line 4 of the clicked block to "&c&l請聯絡職員"	
						message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to EXIT the paid area at %line 2 of the clicked block% but failed. REASON: Anti pass-back." to console
								
						wait 3 second
						if line 1 of the clicked block is "[MineStileOutW]":
							set block below the block 3 blocks right clicked block to redstone block
							set block 3 blocks below the block 2 blocks right clicked block to red wool
						set line 3 of the clicked block to "&a&l請拍卡/車票"
						if {am.%player%} is true:
							if {amW.%player%} is true:
								if {amI.%player%} is true:
									set line 4 of the clicked block to "&b&l不收費出閘IW"
								else if {amD.%player%} is true:
									set line 4 of the clicked block to "&b&l不收費出閘DW"
								else:
									set line 4 of the clicked block to "&b&l不收費出閘"
							else:
								if {amI.%player%} is true:
									set line 4 of the clicked block to "&b&l不收費出閘I"
								else if {amD.%player%} is true:
									set line 4 of the clicked block to "&b&l不收費出閘D"
								else:
									set line 4 of the clicked block to "&b&l不收費出閘"
						else if {cl.%player%} is true:
							if {W.%player%} is true:
								if {I.%player%} is true:
									set line 4 of the clicked block to "&b&lMineStile IW."
								else if {D.%player%} is true:
									set line 4 of the clicked block to "&b&lMineStile DW."
								else:
									set line 4 of the clicked block to "&b&lMineStile"
							else:
								if {I.%player%} is true:
									set line 4 of the clicked block to "&b&lMineStile I."
								else if {D.%player%} is true:
									set line 4 of the clicked block to "&b&lMineStile D."
								else:
									set line 4 of the clicked block to "&b&lMineStile"
						else:
							set line 4 of the clicked block to "&d&lMineStile"
						delete {am.%player%}
						if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
							set block below the clicked block to redstone block
							set block 3 blocks below the block 1 blocks right clicked block to red wool
						else if line 1 of block is "[MineStileOutWT]":
							set block below the block 3 blocks behind clicked block to redstone block
							set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
							set block 3 blocks below the block 1 blocks right clicked block to red wool
							set block 3 blocks below the block 2 blocks right clicked block to red wool
						else:
							set block behind the clicked block to green wool
						
						if line 3 of the block 3 blocks behind the block 2 blocks right clicked block is "A. In":
							set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
						else if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is "A. InW":
							set block below the block 3 blocks behind clicked block to redstone block
							set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
								
						delete {oI.%player%}
						delete {oW.%player%}
						delete {oIn.%player%}
						delete {oInW.%player%}
						delete {am.%player%}
						delete {wait.%player%}
						delete {cl.%player%}
						delete {W.%player%}
						delete {I.%player%}
						delete {D.%player%}
						stop
			
			set {exit.%player%::*} to line 2 of the clicked block split at ","
			
			if {free.%player%} is true:
				if {ftvalidated.%player%} is true:
					if line 4 of the clicked block contains "&b&l不收費出閘":
						add 1 to {ticket.%player%}
					set line 4 of the clicked block to "&d&l免費車票餘下: &a&l%{ticket.%player%}%"
					delete {ftvalidated.%player%}
					delete {free.%player%}
					delete {onstation.%player%}
					message "<white>[MineStile INFO] Player %player% EXITED paid area at %line 2 of the clicked block% with <yellow>FREE RIDE" to console
					
				else:
					set line 4 of the clicked block to "&d&l餘額:&a&l$%{balance.%player%}%"	
					delete {onstation.%player%}
					message "<white>[MineStile INFO] Player %player% EXITED paid area at %line 2 of the clicked block% with <orange>FREE PASS" to console
					
				set {exit.%player%::*} to line 2 of the clicked block split at ","	
				set line 3 of the clicked block to "&d&l此程車費:&a&l$0.0"
				set {deducted.%player%::10} to {deducted.%player%::9}
				set {deducted.%player%::9} to {deducted.%player%::8}
				set {deducted.%player%::8} to {deducted.%player%::7}
				set {deducted.%player%::7} to {deducted.%player%::6}
				set {deducted.%player%::6} to {deducted.%player%::5}
				set {deducted.%player%::5} to {deducted.%player%::4}
				set {deducted.%player%::4} to {deducted.%player%::3}
				set {deducted.%player%::3} to {deducted.%player%::2}
				set {deducted.%player%::2} to {deducted.%player%::1}
				set {deducted.%player%::1} to 0
				if line 1 of clicked block is "[MineStileOutN]" or "[MineStileOutW]":
					set block below the clicked block to light green wool
					set block 3 blocks below the block 1 blocks right clicked block to redstone block
					set block below the block 1 blocks right clicked block to air
				else if line 1 of clicked block is "[MineStileOutWT]":
					set block 3 blocks below the block 1 blocks right clicked block to redstone block
					set block 3 blocks below the block 2 blocks right clicked block to redstone block
					set block below the block 1 blocks right clicked block to air
					set block below the block 2 blocks right clicked block to air
				else:
					set block behind the clicked block to light green wool
				
				if line 1 of clicked block is "[MineStileOutW]":
					set block below the block 3 blocks right clicked block to red wool
					set block 3 blocks below the block 2 blocks right clicked block to redstone block
					set block below the block 2 blocks right clicked block to air
				
				if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
					if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
						set {oI.%player%} to true
					set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool	
				
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block contains "&c&l[暫停使用]":
					set {oW.%player%} to true
					if line 3 of the block 3 blocks behind the block 3 blocks right clicked block doesn't contain "WT":
						if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
							set {oI.%player%} to true
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
				
				if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileInN]":
					set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
					set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInWT]":
					set {oInWT.%player%} to true
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInW]":
					set {oInW.%player%} to true
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
					set block below the block 3 blocks behind clicked block to red wool
					set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
				
				if {balance.%player%} is smaller than 1:
					if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
						set block below the clicked block to yellow wool
					else if line 1 of block is "[MineStileOutL]" or "[MineStileOutM]":
						set block behind the clicked block to yellow wool
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
					wait 0.3 second
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.6"
					wait 0.3 second
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
				else:
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
					
				message "<white>[MineStile INFO] Fare: $%{deducted.%player%::1}%, Remaining Value: $%{balance.%player%}%" to console
				
				set {OutG.%player%} to true
				loop 11 times:
					if {OutG.%player%} is not set:
						exit loop
					wait 0.5 second
				set line 3 of the clicked block to "&a&l請拍卡/車票"
				if {am.%player%} is true:
					if {amW.%player%} is true:
						if {amI.%player%} is true:
							set line 4 of the clicked block to "&b&l不收費出閘IW"
						else if {amD.%player%} is true:
							set line 4 of the clicked block to "&b&l不收費出閘DW"
						else:
							set line 4 of the clicked block to "&b&l不收費出閘"
					else:
						if {amI.%player%} is true:
							set line 4 of the clicked block to "&b&l不收費出閘I"
						else if {amD.%player%} is true:
							set line 4 of the clicked block to "&b&l不收費出閘D"
						else:
							set line 4 of the clicked block to "&b&l不收費出閘"
				else if {cl.%player%} is true:
					if {W.%player%} is true:
						if {I.%player%} is true:
							set line 4 of the clicked block to "&b&lMineStile IW."
						else if {D.%player%} is true:
							set line 4 of the clicked block to "&b&lMineStile DW."
						else:
							set line 4 of the clicked block to "&b&lMineStile"
					else:
						if {I.%player%} is true:
							set line 4 of the clicked block to "&b&lMineStile I."
						else if {D.%player%} is true:
							set line 4 of the clicked block to "&b&lMineStile D."
						else:
							set line 4 of the clicked block to "&b&lMineStile"
				else:
					set line 4 of the clicked block to "&d&lMineStile"
				if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
					set block below the clicked block to redstone block
					set block 3 blocks below the block 1 blocks right clicked block to red wool
					set block below the block 1 blocks right clicked block to heavy weighted pressure plate
				else if line 1 of block is "[MineStileOutWT]":
					set block 3 blocks below the block 1 blocks right clicked block to red wool
					set block 3 blocks below the block 2 blocks right clicked block to red wool
					set block below the block 1 blocks right clicked block to heavy weighted pressure plate
					set block below the block 2 blocks right clicked block to heavy weighted pressure plate
				else:
					set block behind the clicked block to green wool
				if {oI.%player%} is true:
					if {oW.%player%} is true:
						set block below the block 3 blocks behind clicked block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
					else:
						set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
				if line 1 of clicked block is "[MineStileOutW]":
					set block below the block 3 blocks right clicked block to redstone block
					set block 3 blocks below the block 2 blocks right clicked block to red wool
					set block below the block 2 blocks right clicked block to heavy weighted pressure plate
								
				if line 3 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l請稍候對面乘客通過":
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
					set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "[MineStileInN]"
					set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&a&l請拍卡/車票"
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
				else if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l請稍候對面乘客通過":
					if {oInW.%player%} is true:
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileInW]"
						set block below the block 3 blocks behind clicked block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
					else if {oInWT.%player%} is true:
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileInWT]"
					set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
					
				delete {OutG.%player%}
				delete {oI.%player%}
				delete {oW.%player%}
				delete {oInW.%player%}
				delete {oInWT.%player%}
				delete {am.%player%}
				delete {amI.%player%}
				delete {amD.%player%}
				delete {amW.%player%}
				delete {wait.%player%}
				delete {cl.%player%}
				delete {W.%player%}
				delete {I.%player%}
				delete {D.%player%}
				stop 	
			
			set {deducted.%player%::10} to {deducted.%player%::9}
			set {deducted.%player%::9} to {deducted.%player%::8}
			set {deducted.%player%::8} to {deducted.%player%::7}
			set {deducted.%player%::7} to {deducted.%player%::6}
			set {deducted.%player%::6} to {deducted.%player%::5}
			set {deducted.%player%::5} to {deducted.%player%::4}
			set {deducted.%player%::4} to {deducted.%player%::3}
			set {deducted.%player%::3} to {deducted.%player%::2}
			set {deducted.%player%::2} to {deducted.%player%::1}
			set {deducted.%player%::1} to 0
			message "<white>[MineStile INFO] Player %player% EXITED paid area at %line 2 of the clicked block%" to console
			
			add {exit.%player%::1} parsed as integer to {deducted.%player%::1} 
			subtract {enter.%player%::1} parsed as integer from {deducted.%player%::1}
			
			subtract 1 from {deducted.%player%::1}
			if {deducted.%player%::1} is larger than 0:
				add 2 to {deducted.%player%::1}
			if line 1 of clicked block is "[MineStileOutN]" or "[MineStileOutW]" or "[MineStileOutM]":
				set {deducted.%player%::1} to {deducted.%player%::1} *(-2.7)
				if {enter.%player%::2} = {exit.%player%::2}:
					subtract 12.7 from {deducted.%player%::1}
			else:
				set {deducted.%player%::1} to {deducted.%player%::1} *(-1.3)
				if {enter.%player%::2} = {exit.%player%::2}:
					subtract 6.3 from {deducted.%player%::1}
				
			if line 4 of the clicked block contains "&b&l不收費出閘":
				set {deducted.%player%::1} to 0
				
			if {deducted.%player%::1} is larger than 0:
				set {deducted.%player%::1} to (-1) * {deducted.%player%::1}
			
			if {enter.%player%::1} and {exit.%player%::1} are "0":
				if {enter.%player%::2} is not {exit.%player%::2}:
					set {deducted.%player%::1} to 2
			add {deducted.%player%::1} to {balance.%player%}
			
			
			if {onstation.%player%} is not set:
				set {deducted.%player%::1} to 0
			
			
			set line 3 of the clicked block to "&d&l此程車費:&a&l$%{deducted.%player%::1}%"
			if {enter.%player%::1} and {exit.%player%::1} are "0":
				if {enter.%player%::2} is not {exit.%player%::2}:
					set line 3 of the clicked block to "&d&l此程回贈:&a&l$2"
			set line 4 of the clicked block to "&d&l餘額:&a&l$%{balance.%player%}%"
			delete {onstation.%player%}
			delete {exitonly.%player%}
			if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
				set block below the clicked block to light green wool
				set block 3 blocks below the block 1 blocks right clicked block to redstone block
				set block below the block 1 blocks right clicked block to air
			else if line 1 of clicked block is "[MineStileOutWT]":
				set block 3 blocks below the block 1 blocks right clicked block to redstone block
				set block 3 blocks below the block 2 blocks right clicked block to redstone block
				set block below the block 1 blocks right clicked block to air
				set block below the block 2 blocks right clicked block to air
			else:
				set block behind the clicked block to light green wool
			
			if line 1 of clicked block is "[MineStileOutW]":
				set block below the block 3 blocks right clicked block to red wool
				set block 3 blocks below the block 2 blocks right clicked block to redstone block
				set block below the block 2 blocks right clicked block to air
			
			if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
				if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
					set {oI.%player%} to true
				set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
						
			else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
				set {oW.%player%} to true
				if line 3 of the block 3 blocks behind the block 3 blocks right clicked block doesn't contain "WT":
					if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
						set {oI.%player%} to true
					set block below the block 3 blocks behind clicked block to red wool
					set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
			
			if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileInN]":
				set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
				set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
				set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
			else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInW]":
				set {oInW.%player%} to true
				set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
				set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
				set block below the block 3 blocks behind clicked block to red wool
				set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
			else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInWT]":
				set {oInWT.%player%} to true
				set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
				set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
				
			if {balance.%player%} is smaller than 1:		
				if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
					set block below the clicked block to yellow wool
				else if line 1 of block is "[MineStileOutL]" or "[MineStileOutM]":
					set block behind the clicked block to yellow wool
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
				wait 0.3 second
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.6"
				wait 0.3 second
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
			else:
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
			
				
			message "<white>[MineStile INFO] Fare: $%{deducted.%player%::1}%, Remaining Value: $%{balance.%player%}%" to console	
			
			set {OutG.%player%} to true
			loop 11 times:
				if {OutG.%player%} is not set:
					exit loop
				wait 0.5 second
			set line 3 of the clicked block to "&a&l請拍卡/車票"
			set line 4 of the clicked block to "&d&lMineStile"
			if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
				set block below the clicked block to redstone block
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				set block below the block 1 blocks right clicked block to heavy weighted pressure plate
			else if line 1 of block is "[MineStileOutWT]":
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 1 blocks right clicked block to heavy weighted pressure plate
				set block below the block 2 blocks right clicked block to heavy weighted pressure plate
			else:
				set block behind the clicked block to green wool
			if {oI.%player%} is true:
				if {oW.%player%} is true:
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else:
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			if line 1 of clicked block is "[MineStileOutW]":
				set block below the block 3 blocks right clicked block to redstone block
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 2 blocks right clicked block to heavy weighted pressure plate
			
			if line 3 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l請稍候對面乘客通過":
				set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
				set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "[MineStileInN]"
				set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&a&l請拍卡/車票"
				set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			else if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l請稍候對面乘客通過":
				if {oInW.%player%} is true:
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileInW]"
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else if {oInWT.%player%} is true:
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileInWT]"
				set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
			
			if {oI.%player%} is true:
				if {oW.%player%} is true:
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else:
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			
			if {am.%player%} is true:
				if {amW.%player%} is true:
					if {amI.%player%} is true:
						set line 4 of the clicked block to "&b&l不收費出閘IW"
					else if {amD.%player%} is true:
						set line 4 of the clicked block to "&b&l不收費出閘DW"
					else:
						set line 4 of the clicked block to "&b&l不收費出閘"
				else:
					if {amI.%player%} is true:
						set line 4 of the clicked block to "&b&l不收費出閘I"
					else if {amD.%player%} is true:
						set line 4 of the clicked block to "&b&l不收費出閘D"
					else:
						set line 4 of the clicked block to "&b&l不收費出閘"
			else if {cl.%player%} is true:
				if {W.%player%} is true:
					if {I.%player%} is true:
						set line 4 of the clicked block to "&b&lMineStile IW."
					else if {D.%player%} is true:
						set line 4 of the clicked block to "&b&lMineStile DW."
					else:
						set line 4 of the clicked block to "&b&lMineStile"
				else:
					if {I.%player%} is true:
						set line 4 of the clicked block to "&b&lMineStile I."
					else if {D.%player%} is true:
						set line 4 of the clicked block to "&b&lMineStile D."
					else:
						set line 4 of the clicked block to "&b&lMineStile"
			delete {OutG.%player%}
			delete {oI.%player%}
			delete {oW.%player%}
			delete {oInW.%player%}
			delete {oInWT.%player%}
			delete {am.%player%}
			delete {amI.%player%}
			delete {amD.%player%}
			delete {amW.%player%}
			delete {cl.%player%}
			delete {W.%player%}
			delete {I.%player%}
			delete {D.%player%}
			delete {wait.%player%}
		# Normal SmartCard #
		
		# Tickets #
		else if player is holding paper of Unbreaking 5:
							
			if name of player's tool is "Exit-Only Ticket":
				if line 2 of clicked block contains 3 last characters of line 1 of player's tool's lore:
					set line 3 of the clicked block to "&a&l請出閘"
					set line 4 of the clicked block to "&d&l多謝"
					if line 1 of clicked block is "[MineStileOutL]":
						set line 3 of the clicked block to "&a&l請出站"
					message "<white>[MineStile INFO] Player %player% EXITED paid area at %line 2 of the clicked block% with SJC." to console
					if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
						set block below the clicked block to light green wool
						set block 3 blocks below the block 1 blocks right clicked block to redstone block
						set block below the block 1 blocks right clicked block to air
					else if line 1 of clicked block is "[MineStileOutWT]":
						set block 3 blocks below the block 1 blocks right clicked block to redstone block
						set block 3 blocks below the block 2 blocks right clicked block to redstone block
						set block below the block 1 blocks right clicked block to air
						set block below the block 2 blocks right clicked block to air
					else:
						set block behind the clicked block to light green wool
					if line 1 of block is "[MineStileOutW]":
						set block below the block 3 blocks right clicked block to red wool
						set block 3 blocks below the block 2 blocks right clicked block to redstone block
						set block below the block 2 blocks right clicked block to air
					
					if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
						if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
							set {oI.%player%} to true
						set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
							
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
						set {oW.%player%} to true
						if line 3 of the block 3 blocks behind the block 3 blocks right clicked block doesn't contain "WT":
							if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
								set {oI.%player%} to true
							set block below the block 3 blocks behind clicked block to red wool
							set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					
					if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileInN]":
						set {oIn.%player%} to true
						set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
						set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInW]":
						set {oInW.%player%} to true
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInWT]":
						set {oInWT.%player%} to true
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
				
				else:
					execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
					set line 3 of the clicked block to "&c&l車票失效"
					set line 4 of the clicked block to "&c&l請聯絡職員"
					message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to EXIT the paid area at %line 2 of the clicked block% but failed. REASON: Not appropriate Exit Station." to console
					
			if name of player's tool is "Single Journey Ticket":
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to EXIT the paid area at %line 2 of the clicked block% but failed. REASON: Anti pass-back." to console
				
				
			else if line 2 of clicked block contains 1 last characters of line 1 of player's tool's lore:
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				if line 4 of the clicked block contains "&b&l不收費出閘":
					set {am.%player%} to true
					if line 4 of the clicked block contains "I":
						set {amI.%player%} to true
					if line 4 of the clicked block contains "D":
						set {amD.%player%} to true
					if line 4 of the clicked block contains "W":
						set {amW.%player%} to true
					set the name of player's tool to "Single Journey Ticket"
				set line 3 of the clicked block to "&a&l請出閘"
				set line 4 of the clicked block to "&d&l多謝"
				if line 1 of clicked block is "[MineStileOutL]":
					set line 3 of the clicked block to "&a&l請出站"
				message "<white>[MineStile INFO] Player %player% EXITED paid area at %line 2 of the clicked block% with SJC." to console
				if line 1 of clicked block is "[MineStileOutN]" or "[MineStileOutW]":
					set block below the clicked block to light green wool
					set block 3 blocks below the block 1 blocks right clicked block to redstone block
					set block below the block 1 blocks right clicked block to air
				else if line 1 of clicked block is "[MineStileOutWT]":
					set block 3 blocks below the block 1 blocks right clicked block to redstone block
					set block 3 blocks below the block 2 blocks right clicked block to redstone block
					set block below the block 1 blocks right clicked block to air
					set block below the block 2 blocks right clicked block to air
				else:
					set block behind the clicked block to light green wool
				if line 1 of clicked block is "[MineStileOutW]":
					set block below the block 3 blocks right clicked block to red wool
					set block 3 blocks below the block 2 blocks right clicked block to redstone block
					set block below the block 2 blocks right clicked block to air
								
				if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileInN]":
					set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
					set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInW]":
					set {oInW.%player%} to true
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
					set block below the block 3 blocks behind clicked block to red wool
					set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInWT]":
					set {oInWT.%player%} to true
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
					set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
					
				if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
					if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
						set {oI.%player%} to true
					set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
						
				else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
					set {oW.%player%} to true
					if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
						set {oI.%player%} to true
					set block below the block 3 blocks behind clicked block to red wool
					set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
				if {am.%player%} is not set:
					remove 1 of player's tool from player

			else:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to EXIT the paid area at %line 2 of the clicked block% but failed. REASON: Not appropriate Exit Zone." to console
			
			set {OutG.%player%} to true
			loop 11 times:
				if {OutG.%player%} is not set:
					exit loop
				wait 0.5 second
			set line 3 of the clicked block to "&a&l請拍卡/車票"
			if {am.%player%} is true:
				if {amW.%player%} is true:
					if {amI.%player%} is true:
						set line 4 of the clicked block to "&b&l不收費出閘IW"
					else if {amD.%player%} is true:
						set line 4 of the clicked block to "&b&l不收費出閘DW"
					else:
						set line 4 of the clicked block to "&b&l不收費出閘"
				else:
					if {amI.%player%} is true:
						set line 4 of the clicked block to "&b&l不收費出閘I"
					else if {amD.%player%} is true:
						set line 4 of the clicked block to "&b&l不收費出閘D"
					else:
						set line 4 of the clicked block to "&b&l不收費出閘"
			else:
				set line 4 of the clicked block to "&d&lMineStile"
			if line 1 of block is "[MineStileOutN]" or "[MineStileOutW]":
				set block below the clicked block to redstone block
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				set block below the block 1 blocks right clicked block to heavy weighted pressure plate
			else if line 1 of block is "[MineStileOutWT]":
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 1 blocks right clicked block to heavy weighted pressure plate
				set block below the block 2 blocks right clicked block to heavy weighted pressure plate
			else:
				set block behind the clicked block to green wool
			if {oI.%player%} is true:
				if {oW.%player%} is true:
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else:
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			if line 1 of block is "[MineStileOutW]":
				set block below the block 3 blocks right clicked block to redstone block
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 2 blocks right clicked block to heavy weighted pressure plate
							
			if line 3 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l請稍候對面乘客通過":
				set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
				set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "[MineStileInN]"
				set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&a&l請拍卡/車票"
				set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			else if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l請稍候對面乘客通過":
				if {oInW.%player%} is true:
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileInW]"
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else if {oInWT.%player%} is true:
					set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileInWT]"
				set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
			
			if {oI.%player%} is true:
				if {oW.%player%} is true:
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else:
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block

			delete {OutG.%player%}
			delete {oI.%player%}
			delete {oW.%player%}
			delete {oInW.%player%}
			delete {oInWT.%player%}
			delete {am.%player%}
			delete {amI.%player%}
			delete {amD.%player%}
			delete {amW.%player%}
			delete {wait.%player%}
		# Tickets #
		delete {wait.%player%}
	# (Wide) Out Gates #		
	
	# Fee Collecting Gates #	
	else if line 1 of block is "[MineStileFeeN]" or "[MineStileFeeW]":
		
		if {wait.%player%} is true:
			stop		
		set {wait.%player%} to true
		# Normal SmartCard #
		if player is holding Name Tag of Unbreaking 5:
			if name of player's tool doesn't contain player's name:
				execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
				set line 3 of the clicked block to "&c&l車票失效"
				set line 4 of the clicked block to "&c&l請聯絡職員"
				message "<white>[MineStile <red>ERROR<white>] Player %player% attempted to pay the fee at %line 2 of the clicked block% but failed. REASON: illegal card usage." to console
				wait 3 second
				if line 1 of the clicked block is "[MineStileFeeW]":
					set block below the block 3 blocks right clicked block to redstone block
					set block 3 blocks below the block 2 blocks right clicked block to red wool
				set line 3 of the clicked block to "&a&l請拍卡繳費"
				set line 4 of the clicked block to "&d&lMineStile"
				set block below the clicked block to redstone block
				set block 3 blocks below the block 1 blocks right clicked block to red wool
				delete {wait.%player%}
				stop
				
			else if {balance.%player%} is smaller than 1:
				if {free.%player%} is not set:
					execute console command "/playsound block.anvil.land master %player% ~ ~ ~ 1000"
					set line 3 of the clicked block to "&c&l餘額不足"
					set line 4 of the clicked block to "&c&l請增值"
					message "<white>[&6&lMineStile <red>ERROR<white>] Player %player% attempted to pay the FEE at %line 2 of the clicked block% but failed. REASON: Insufficient Value." to console
					wait 3 second
					if line 1 of the clicked block is "[MineStileFeeW]":
						set block below the block 3 blocks right clicked block to redstone block
						set block 3 blocks below the block 2 blocks right clicked block to red wool
					set line 3 of the clicked block to "&a&l請拍卡繳費"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					set block 3 blocks below the block 1 blocks right clicked block to red wool
					delete {wait.%player%}
					stop
					
			set {fee.%player%::*} to line 2 of the clicked block split at ","
			set block below the clicked block to  light green wool
			set block 3 blocks below the block 1 blocks right clicked block to redstone block
			set block below the block 1 blocks right clicked block to air
			if line 1 of block is "[MineStileFeeW]":
				set block below the block 3 blocks right clicked block to red wool
				set block 3 blocks below the block 2 blocks right clicked block to redstone block
				set block below the block 2 blocks right clicked block to air
			if {free.%player%} is not set:
				message "<white>[MineStile INFO] Player %player% paid the FEE at %line 2 of the clicked block%" to console
				set {deducted.%player%::10} to {deducted.%player%::9}
				set {deducted.%player%::9} to {deducted.%player%::8}
				set {deducted.%player%::8} to {deducted.%player%::7}
				set {deducted.%player%::7} to {deducted.%player%::6}
				set {deducted.%player%::6} to {deducted.%player%::5}
				set {deducted.%player%::5} to {deducted.%player%::4}
				set {deducted.%player%::4} to {deducted.%player%::3}
				set {deducted.%player%::3} to {deducted.%player%::2}
				set {deducted.%player%::2} to {deducted.%player%::1}
				
				set {deducted.%player%::1} to (-1) * {fee.%player%::1} parsed as number
				add {deducted.%player%::1} to {balance.%player%}
				set line 3 of the clicked block to "&d&l已收費: &a&l$%{deducted.%player%::1}%"	
				set line 4 of the clicked block to "&d&l餘額:&a&l$%{balance.%player%}%"
				execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
			else if {free.%player%} is true:
				message "<white>[MineStile INFO] Player %player% passed the fee gate at %line 2 of the clicked block% <yellow>WITH FREE PASS/FREE RIDE" to console
				set line 3 of the clicked block to "&d&l已收費: &a&l$0.0"	
				set line 4 of the clicked block to "&d&l餘額:&a&l$%{balance.%player%}%"	
				if {balance.%player%} is smaller than 1:		
					set block below the clicked block to yellow wool
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
					wait 0.3 second
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.6"
					wait 0.3 second
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
				else:
					execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
			message "<white>[MineStile INFO] Remaining Value: $%{balance.%player%}%" to console	
				
			if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
				if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
					set {oI.%player%} to true
				set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
					
			else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
				set {oW.%player%} to true
				if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
					set {oI.%player%} to true
				set block below the block 3 blocks behind clicked block to red wool
				set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
			loop 11 times:
				if {wait.%player%} is not set:
					exit loop
				wait 0.5 second
			set line 3 of the clicked block to "&a&l請拍卡繳費"
			set line 4 of the clicked block to "&d&lMineStile"
			set block below the clicked block to redstone block
			set block 3 blocks below the block 1 blocks right clicked block to red wool
			set block below the block 1 blocks right clicked block to heavy weighted pressure plate
			if {oI.%player%} is true:
				if {oW.%player%} is true:
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				else:
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
			if line 1 of clicked block is "[MineStileFeeW]":
				set block below the block 3 blocks right clicked block to redstone block
				set block 3 blocks below the block 2 blocks right clicked block to red wool
				set block below the block 2 blocks right clicked block to heavy weighted pressure plate
			delete {oW.%player%}
			delete {oOut.%player%}
			delete {oOutW.%player%}
			delete {wait.%player%}
			delete {fee.%player%}
		# Normal SmartCard #
		
	# Fee Collecting Gates #
	
	# Toilet Gates #
	else if line 1 of clicked block contains "[MineStileT":
		# Entry #
		if line 1 of clicked block is "[MineStileTIn]":
			if line 3 of clicked block is "&a&l空閒中":
				set block below the block behind the clicked block to redstone block
				set {wait.%player%} to true
				loop 11 times:
					if {wait.%player%} is not set:
						stop
					wait 0.5 second
				set block below the block behind the clicked block to light green wool		
		# Entry #
		
		# Inside Locking #
		else if line 1 of clicked block is "[MineStileTL]":
			if line 3 of clicked block is "&a&l未上鎖":
				set line 3 of clicked block to "&c&l已上鎖"
				set line 4 of clicked block to "&d&l按此開門"
				set block below the block behind the clicked block to red wool
				loop blocks in radius 3 around the clicked block:
					if line 2 of loop-block is line 2 of clicked block:
						if line 1 of loop-block is "[MineStileTIn]":
							set line 3 of loop-block to "&c&l使用中"
							set line 4 of loop-block to "&c&l請稍後"
						if line 1 of loop-block is "[MineStileTO]":
							set line 3 of loop-block to "&c&l使用中"
							set line 4 of loop-block to "&c&l按此緊急開門"
			else if line 4 of clicked block is "&c&l請稍後":
				stop
			else if line 3 of clicked block is "&c&l已上鎖":
				set line 3 of clicked block to "&a&l請離開"
				set line 4 of clicked block to "&d&lMineStile"
				set block below the block behind the clicked block to redstone block
				wait 5 second
				set line 3 of clicked block to "&a&l未上鎖"
				set line 4 of clicked block to "&d&l按此鎖門"
				set block below the block behind the clicked block to light green wool
				loop blocks in radius 3 around the clicked block:
					if line 2 of loop-block is line 2 of clicked block:
						if line 1 of loop-block is "[MineStileTIn]":
							set line 3 of loop-block to "&a&l空閒中"
							set line 4 of loop-block to "&d&l按此開門"
						if line 1 of loop-block is "[MineStileTO]":
							set line 3 of loop-block to "&a&l空閒中"
							set line 4 of loop-block to "&d&l職員拍卡鎖門"
		# Inside Locking #
		
		# Emergency Call #
		else if line 1 of clicked block is "[MineStileTE]":
			set {Emergency.%player%} to true
			while {Emergency.%player%} is true:
				message "<light red>[MINESTILE WARNING] %player% is in EMERGENCY in %line 2 of the clicked block%" to op
				wait 10 second
		# Emergency Call #
		
		# Staff Locking #
		else if line 1 of clicked block is "[MineStileTO]":
			if line 3 of clicked block is "&a&l空閒中":
				set line 3 of clicked block to "&c&l已上鎖"
				set line 4 of clicked block to "&c&l職員拍卡解鎖"
				set block behind the clicked block to red wool
				loop blocks in radius 3 around the clicked block:
					if line 2 of loop-block is line 2 of clicked block:
						if line 1 of loop-block is "[MineStileTIn]" or "[MineStileTL]":
							set line 3 of loop-block to "&c&l已上鎖"
							set line 4 of loop-block to "&c&l請稍後"
			else if line 4 of clicked block is "&c&l職員拍卡解鎖":
				if player is holding Name Tag of Unbreaking 5:
					if {staff.%player%} is true:
						set line 3 of clicked block to "&a&l空閒中"
						set line 4 of clicked block to "&d&l職員拍卡鎖門"
						set block behind the clicked block to light green wool
						loop blocks in radius 3 around the clicked block:
							if line 2 of loop-block is line 2 of clicked block:
								if line 1 of loop-block is "[MineStileTIn]":
									set line 3 of loop-block to "&a&l空閒中"
									set line 4 of loop-block to "&d&l按此開門"
								if line 1 of loop-block is "[MineStileTL]":
									set line 3 of loop-block to "&a&l未上鎖"
									set line 4 of loop-block to "&d&l按此鎖門"
			else if line 4 of clicked block is "&c&l按此緊急開門":
				if player is holding Name Tag of Unbreaking 5:
					if {staff.%player%} is true:
						set line 3 of clicked block to "&a&l空閒中"
				else:	
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
					message "<light red>[MINESTILE WARNING] %player% activated EMERGENCY DOOR OPEN in %line 2 of the clicked block%" to op
				set line 3 of clicked block to "&a&l門鎖已開"
				set line 4 of clicked block to "&d&lMineStile"
				set block behind the clicked block to redstone block
				wait 5 second
				set line 3 of clicked block to "&a&l空閒中"
				set line 4 of clicked block to "&d&l職員拍卡鎖門"
				set block behind the clicked block to light green wool
				loop blocks in radius 3 around the clicked block:
					if line 2 of loop-block is line 2 of clicked block:
						if line 1 of loop-block is "[MineStileTIn]":
							set line 3 of loop-block to "&a&l空閒中"
							set line 4 of loop-block to "&d&l按此開門"
						if line 1 of loop-block is "[MineStileTL]":
							set line 3 of loop-block to "&a&l未上鎖"
							set line 4 of loop-block to "&d&l按此鎖門"
		# Staff Locking #
		delete {wait.%player%}
		delete {Emergency.%player%}
		
	# Toilet Gates #
	
	# Staff Override for Gates Not in Use #
	else if line 1 of clicked block is "&c&l[暫停使用]":
		if {staff.%player%} is true:
			if player is holding Name Tag of Unbreaking 5:
				if {wait.%player%} is true:
					stop
				if line 3 of clicked block contains "CuC" or "Stf" or "Key":
					stop
				set {wait.%player%} to true
								
				if line 3 of clicked block contains "In" or "A. In":
					set {In.%player%} to true
					set {InG.%player%} to true
					
					if line 3 of clicked block contains "W":
						set {W.%player%} to true
					if line 3 of clicked block contains "A.":
						set {A.%player%} to true
					if line 3 of clicked block contains "S":
						set {S.%player%} to true
					if line 3 of clicked block contains "D":
						set {D.%player%} to true
					if line 3 of clicked block contains "InL":
						set {L.%player%} to true
					if line 3 of clicked block contains "M":
						set {M.%player%} to true
					if line 3 of clicked block contains "WT":
						set {T.%player%} to true
					set {enter.%player%::*} to line 2 of the clicked block split at ","
					message "<white>[MineStile INFO] <red>STAFF<white> %player% ENTERED paid area at %line 2 of the clicked block%" to console
					set line 3 of clicked block to "&a&l請入閘"
					set line 4 of clicked block to "&d&l餘額:&a&l$%{balance.%player%}%"
					if {T.%player%} is not set:
						if the block below the clicked block is redstone block:
							set {I.%player%} to true
						if {L.%player%} or {M.%player%} is not set:
							set block below the clicked block to light green wool
							set block 3 blocks below the block 1 blocks right clicked block to redstone block
							set block below the block 1 blocks right clicked block to air
							if {W.%player%} is true:
								set block below the block 3 blocks right clicked block to red wool
								set block 3 blocks below the block 2 blocks right clicked block to redstone block
								set block below the block 2 blocks right clicked block to air
					else:
						set block 3 blocks below the block 1 blocks right clicked block to redstone block
						set block 3 blocks below the block 2 blocks right clicked block to redstone block
						set block below the block 1 blocks right clicked block to air
						set block below the block 2 blocks right clicked block to air
						
					message "<white>[MineStile INFO] Remaining Value: $%{balance.%player%}%" to console		
					
					if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
						if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
							set {oI.%player%} to true
						set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
					
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
						if line 3 of the block 3 blocks behind the block 3 blocks right clicked block contains "W":
							set {oW.%player%} to true
							if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
								set {oI.%player%} to true
							if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is not "OutWT":
								set block below the block 3 blocks behind clicked block to red wool
								set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					
					if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileOutN]":
						set {oOut.%player%} to true
						set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
						set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool		
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileOutW]":
						set {oOutW.%player%} to true
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileOutWT]":
						set {oOutWT.%player%} to true
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
						
					if {balance.%player%} is smaller than 1:
						if {L.%player%} or {M.%player%} is true:
							set block behind the clicked block to yellow wool
						else if {T.%player%} is not set:
							set block below the clicked block to yellow wool
						set line 3 of the clicked block to "&c&l請增值"
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
						wait 0.3 second
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.6"
						wait 0.3 second
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
					else:
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
						
				else if line 3 of clicked block contains "Out":
					set {Out.%player%} to true	
					set {OutG.%player%} to true
					if line 3 of clicked block contains "W":
						set {W.%player%} to true
					if line 3 of clicked block contains "S":
						set {S.%player%} to true
					if line 3 of clicked block contains "D":
						set {D.%player%} to true
					if line 3 of clicked block contains "L":
						set {L.%player%} to true	
					if line 3 of clicked block contains "M":
						set {M.%player%} to true	
					if line 3 of clicked block contains "WT":
						set {T.%player%} to true	
					set line 4 of the clicked block to "&d&l餘額:&a&l$%{balance.%player%}%"	
					delete {onstation.%player%}
					message "<white>[MineStile INFO] Player %player% EXITED paid area at %line 2 of the clicked block% with <orange>FREE PASS" to console
					
					set {exit.%player%::*} to line 2 of the clicked block split at ","	
					set line 3 of the clicked block to "&d&l此程車費:&a&l$0.0"
					set {deducted.%player%::10} to {deducted.%player%::9}
					set {deducted.%player%::9} to {deducted.%player%::8}
					set {deducted.%player%::8} to {deducted.%player%::7}
					set {deducted.%player%::7} to {deducted.%player%::6}
					set {deducted.%player%::6} to {deducted.%player%::5}
					set {deducted.%player%::5} to {deducted.%player%::4}
					set {deducted.%player%::4} to {deducted.%player%::3}
					set {deducted.%player%::3} to {deducted.%player%::2}
					set {deducted.%player%::2} to {deducted.%player%::1}
					set {deducted.%player%::1} to 0
					if {T.%player%} is not set:
						if the block below the clicked block is redstone block:
							set {I.%player%} to true
						if {L.%player%} or {M.%player%} is not set:
							set block below the clicked block to light green wool
							set block 3 blocks below the block 1 blocks right clicked block to redstone block
							set block below the block 1 blocks right clicked block to air
							if {W.%player%} is true:
								set block below the block 3 blocks right clicked block to red wool
								set block 3 blocks below the block 2 blocks right clicked block to redstone block
								set block below the block 2 blocks right clicked block to air
					else:
						set block 3 blocks below the block 1 blocks right clicked block to redstone block
						set block 3 blocks below the block 2 blocks right clicked block to redstone block
						set block below the block 1 blocks right clicked block to air
						set block below the block 2 blocks right clicked block to air
						
					if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
						if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
							set {oI.%player%} to true
						set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
						
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
						if line 3 of the block 3 blocks behind the block 3 blocks right clicked block contains "W":
							set {oW.%player%} to true
							if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
								set {oI.%player%} to true
							if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is not "InWT":
								set block below the block 3 blocks behind clicked block to red wool
								set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					
					if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileInN]":
						set {oIn.%player%} to true
						set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
						set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInW]":
						set {oInW.%player%} to true
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileInWT]":
						set {oInWT.%player%} to true
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"	
							
					if {balance.%player%} is smaller than 1:		
						if {L.%player%} or {M.%player%} is true:
							set block behind the clicked block to yellow wool
						else if {T.%player%} is not set:
							set block below the clicked block to yellow wool
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
						wait 0.3 second
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.6"
						wait 0.3 second
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
					else:
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
						
					message "<white>[MineStile INFO] Fare: $%{deducted.%player%::1}%, Remaining Value: $%{balance.%player%}%" to console
				
				else if line 3 of clicked block contains "Fee":
					set {fee.%player%} to true
					if line 3 of clicked block contains "W":
						set {W.%player%} to true
					message "<white>[MineStile INFO] <red>STAFF<white> %player% ENTERED paid area at %line 2 of the clicked block%" to console
					set line 3 of clicked block to "&d&l已扣除: &a&l$0.0"
					set line 4 of clicked block to "&d&l餘額:&a&l$%{balance.%player%}%"
					set {deducted.%player%::10} to {deducted.%player%::9}
					set {deducted.%player%::9} to {deducted.%player%::8}
					set {deducted.%player%::8} to {deducted.%player%::7}
					set {deducted.%player%::7} to {deducted.%player%::6}
					set {deducted.%player%::6} to {deducted.%player%::5}
					set {deducted.%player%::5} to {deducted.%player%::4}
					set {deducted.%player%::4} to {deducted.%player%::3}
					set {deducted.%player%::3} to {deducted.%player%::2}
					set {deducted.%player%::2} to {deducted.%player%::1}
					set {deducted.%player%::1} to 0
					if the block below the clicked block is redstone block:
						set {I.%player%} to true
					set block below the clicked block to light green wool
					set block 3 blocks below the block 1 blocks right clicked block to redstone block
					set block below the block 1 blocks right clicked block to air
					if {W.%player%} is true:
						set block below the block 3 blocks right clicked block to red wool
						set block 3 blocks below the block 2 blocks right clicked block to redstone block
						set block below the block 2 blocks right clicked block to air
					message "<white>[MineStile INFO] Remaining Value: $%{balance.%player%}%" to console		
					
					if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "[MineStileFeeN]":
						set {oFee.%player%} to true
						set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&c&l請稍候對面乘客通過"
						set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool		
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "[MineStileFeeW]":
						set {oFeeW.%player%} to true
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l[暫停使用]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&c&l請稍候對面乘客通過"
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					
					if line 1 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l[暫停使用]":
						if block below the block 3 blocks behind the block 2 blocks right clicked block is redstone block:
							set {oI.%player%} to true
						set block below the block 3 blocks behind the block 2 blocks right clicked block to red wool
						
					else if line 1 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l[暫停使用]":
						set {oW.%player%} to true
						if block below the block 3 blocks behind the block 3 blocks right clicked block is redstone block:
							set {oI.%player%} to true
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
						
					if {balance.%player%} is smaller than 1:		
						set block below the clicked block to yellow wool
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
						wait 0.3 second
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.6"
						wait 0.3 second
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000 0.8"
					else:
						execute console command "/playsound entity.experience_orb.pickup master %player% ~ ~ ~ 1000"
				
				loop 11 times:
					if {InG.%player%} and {OutG.%player%} are not set:
						exit loop
					wait 0.5 second
				if {In.%player%} is true:
					if {W.%player%} is true:
						if {A.%player%} is true:
							if {T.%player%} is true:
								if {S.%player%} is true:
									set line 3 of clicked block to "A. InWT S"
								else if {D.%player%} is true:
									set line 3 of clicked block to "A. InWT D"
								else:
									set line 3 of clicked block to "A. InWT"
							else:
								if {S.%player%} is true:
									set line 3 of clicked block to "A. InW S"
								else if {D.%player%} is true:
									set line 3 of clicked block to "A. InW D"
								else:
									set line 3 of clicked block to "A. InW"
							set line 4 of clicked block to "&c&lMineStile"
						else:
							if {T.%player%} is true:
								set line 3 of clicked block to "InWT"
							else:
								set line 3 of clicked block to "InW"
							set line 4 of the clicked block to "&d&lMineStile"
						set block 3 blocks below the block 2 blocks right clicked block to red wool
						set block below the block 2 blocks right clicked block to light weighted pressure plate
					else:
						if {A.%player%} is true:
							if {S.%player%} is true:
								set line 3 of clicked block to "A. InN S"
							else if {D.%player%} is true:
								set line 3 of clicked block to "A. InN D"
							else:
								set line 3 of clicked block to "A. InN"
							set line 4 of clicked block to "&c&lMineStile"
						else if {L.%player%} is true:
							set line 3 of clicked block to "InL"
							set line 4 of the clicked block to "&d&lMineStile"
						else if {M.%player%} is true:
							set line 3 of clicked block to "InM"
							set line 4 of the clicked block to "&d&lMineStile"
						else:
							set line 3 of clicked block to "InN"
							set line 4 of the clicked block to "&d&lMineStile"
				else if {Out.%player%} is true:
					if {W.%player%} is true:
						if {T.%player%} is true:
							set line 3 of clicked block to "OutWT"
						else:
							set line 3 of clicked block to "OutW"
						set line 4 of the clicked block to "&d&lMineStile"
						set block 3 blocks below the block 2 blocks right clicked block to red wool
						set block below the block 2 blocks right clicked block to heavy weighted pressure plate
					else:
						if {L.%player%} is true:
							set line 3 of clicked block to "OutL"
							set line 4 of the clicked block to "&d&lMineStile"
						else if {M.%player%} is true:
							set line 3 of clicked block to "OutM"
							set line 4 of the clicked block to "&d&lMineStile"
						else:
							set line 3 of clicked block to "OutN"
							set line 4 of the clicked block to "&d&lMineStile"
						
				else if {fee.%player%} is true:
					if {W.%player%} is true:
						set line 3 of clicked block to "FeeW"
						set block 3 blocks below the block 2 blocks right clicked block to red wool
						set block below the block 2 blocks right clicked block to heavy weighted pressure plate
					else:
						set line 3 of clicked block to "FeeN"
					set line 4 of the clicked block to "&d&lMineStile"
					
				if {T.%player%} is not set:	
					if {I.%player%} is true:
						set block below the clicked block to redstone block
						if {W.%player%} is true:
							set block below the block 3 blocks right clicked block to redstone block
					else:
						set block below the clicked block to red wool
					
				if {L.%player%} or {M.%player%} is not set:			
					set block 3 blocks below the block 1 blocks right clicked block to red wool
					if {In.%player%} is true:
						set block below the block 1 blocks right clicked block to light weighted pressure plate
						if {W.%player%} is true:
							set block below the block 2 blocks right clicked block to light weighted pressure plate
					else if {Out.%player%} is true:
						set block below the block 1 blocks right clicked block to heavy weighted pressure plate
						if {W.%player%} is true:
							set block below the block 2 blocks right clicked block to heavy weighted pressure plate
				
				
				if {oI.%player%} is true:
					if {oW.%player%} is true:
						set block below the block 3 blocks behind clicked block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
					else:
						set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
				
				if line 3 of the block 3 blocks behind the block 2 blocks right clicked block is "&c&l請稍候對面乘客通過":
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
					if {oIn.%player%} is true:
						set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "[MineStileInN]"
						set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&a&l請拍卡/車票"
					else if {oOut.%player%} is true:
						set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "[MineStileOutN]"
						set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&a&l請拍卡/車票"
					else if {oFee.%player%} is true:
						set line 1 of the block 3 blocks behind the block 2 blocks right clicked block to "[MineStileFeeN]"
						set line 3 of the block 3 blocks behind the block 2 blocks right clicked block to "&a&l請拍卡繳費"
					set block below the block 3 blocks behind the block 2 blocks right clicked block to redstone block
				else if line 3 of the block 3 blocks behind the block 3 blocks right clicked block is "&c&l請稍候對面乘客通過":
					if {oInW.%player%} is true:
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileInW]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
					else if {oInWT.%player%} is true:
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileInWT]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
					else if {oOutW.%player%} is true:
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileOutW]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
					else if {oOutWT.%player%} is true:
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileOutWT]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡/車票"
					else if {oFeeW.%player%} is true:
						set line 1 of the block 3 blocks behind the block 3 blocks right clicked block to "[MineStileFeeW]"
						set line 3 of the block 3 blocks behind the block 3 blocks right clicked block to "&a&l請拍卡繳費"
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				
				delete {W.%player%}
				delete {A.%player%}
				delete {S.%player%}
				delete {D.%player%}
				delete {I.%player%}
				delete {L.%player%}
				delete {M.%player%}
				delete {T.%player%}
				delete {In.%player%}
				delete {Out.%player%}
				delete {InG.%player%}
				delete {OutG.%player%}
				delete {fee.%player%}
				delete {oI.%player%}
				delete {oW.%player%}
				delete {oIn.%player%}
				delete {oInW.%player%}
				delete {oInWT.%player%}
				delete {oOut.%player%}
				delete {oOutW.%player%}
				delete {oOutWT.%player%}
				delete {oFee.%player%}
				delete {oFeeW.%player%}
				delete {close.%player%}
				delete {wait.%player%}
	# Staff Override for Gates Not in Use #
	
	# Gates Remote Control #
	else if line 1 of clicked block is "[MineStileStat]":
		loop blocks in radius 120 around the clicked block:
			if line 1 of loop-block is not "[MineStileStat]":
				if player's tool is Gray Dye or Rose Red:
					if line 3 of clicked block contains "Out":
						if line 1 of loop-block contains "[MineStileOut":
							if line 2 of loop-block is line 2 of clicked block:
								if player's tool is Gray Dye:
									if line 1 of loop-block contains "OutWT":
										set line 3 of the loop-block to "OutWT"
									else if line 1 of loop-block contains "OutN" or "OutW":
										set block below the loop-block to red wool
										set line 3 of the loop-block to "OutN"
										if line 1 of loop-block contains "OutW":
											set block below the block 3 blocks right loop-block to red wool
											set line 3 of the loop-block to "OutW"
									if line 1 of loop-block contains "OutL":
										set block behind the loop-block to red wool
										set line 3 of the loop-block to "OutL"
									if line 1 of loop-block contains "OutM":
										set block behind the loop-block to red wool
										set line 3 of the loop-block to "OutM"
									loop blocks in radius 120 around the clicked block:
										if line 1 of loop-block-2 is "[MineStileStat]":
											if line 3 of loop-block-2 contains "Out":
												if line 2 of loop-block-2 is line 2 of clicked block:
													set line 4 of loop-block-2 to "&d&lStat: &c&lNIS"
													set block behind loop-block-2 to red wool
													set line 4 of the loop-block-1 to "&d&lMineStile"
								else if player's tool is Rose Red:
									if line 1 of loop-block contains "OutWT":
										stop
									else if line 1 of loop-block contains "OutN" or "OutW":
										set block below the loop-block to redstone block
										set line 3 of the loop-block to "OutN"
										if line 1 of loop-block contains "OutW":
											set block below the block 3 blocks right loop-block to redstone block
											set line 3 of the loop-block to "OutW"
									if line 1 of loop-block contains "OutL" or "OutM":
										stop
									loop blocks in radius 120 around the clicked block:
										if line 1 of loop-block-2 is "[MineStileStat]":
											if line 3 of loop-block-2 contains "Out":
												if line 2 of loop-block-2 is line 2 of clicked block:
													set line 4 of loop-block-2 to "&d&lStat: &4&lISO"
													set block behind loop-block-2 to redstone block
													set line 4 of the loop-block-1 to "&d&lMineStile"
								set line 1 of the loop-block to "&c&l[暫停使用]"
					else if line 3 of clicked block contains "In":
						if line 1 of loop-block contains "[MineStileIn":
							if line 2 of loop-block is line 2 of clicked block:
								if player's tool is Gray Dye:
									if line 1 of loop-block contains "InWT":
										set line 3 of the loop-block to "InWT"
									else if line 1 of loop-block contains "InN" or "InW":
										set block below the loop-block to red wool
										set line 3 of the loop-block to "InN"
										if line 1 of loop-block contains "InW":
											set block below the block 3 blocks right loop-block to red wool
											set line 3 of the loop-block to "InW"
									if line 1 of loop-block contains "InL":
										set block behind the loop-block to red wool
										set line 3 of the loop-block to "InL"
									if line 1 of loop-block contains "InM":
										set block behind the loop-block to red wool
										set line 3 of the loop-block to "InM"
									loop blocks in radius 120 around the clicked block:
										if line 1 of loop-block-2 is "[MineStileStat]":
											if line 3 of loop-block-2 contains "In":
												if line 2 of loop-block-2 is line 2 of clicked block:
													set line 4 of loop-block-2 to "&d&lStat: &c&lNIS"
													set block behind loop-block-2 to red wool
													set line 4 of the loop-block-1 to "&d&lMineStile"
								else if player's tool is Rose Red:
									if line 1 of loop-block contains "InWT":
										stop
									else if line 1 of loop-block contains "InN" or "InW":
										set block below the loop-block to redstone block
										set line 3 of the loop-block to "InN"
										if line 1 of loop-block contains "InW":
											set block below the block 3 blocks right loop-block to redstone block
											set line 3 of the loop-block to "InW"
									if line 1 of loop-block contains "InL" or "InM":
										stop
									loop blocks in radius 120 around the clicked block:
										if line 1 of loop-block-2 is "[MineStileStat]":
											if line 3 of loop-block-2 contains "In":
												if line 2 of loop-block-2 is line 2 of clicked block:
													set line 4 of loop-block-2 to "&d&lStat: &4&lISO"
													set block behind loop-block-2 to redstone block
													set line 4 of the loop-block-1 to "&d&lMineStile"
								set line 1 of the loop-block to "&c&l[暫停使用]"
					else if line 3 of clicked block or line 1 of clicked block contains "Stf" or "CuC":
						if line 1 of loop-block contains "MineStileStf" or "MineStileCuC":
							if line 2 of loop-block is line 2 of clicked block:
								if line 1 of loop-block contains line 3 of clicked block:
									if player's tool is Gray Dye:
										set block below the loop-block to light green wool
										set block below the block behind the loop-block to redstone block
										if line 1 of loop-block contains "Stfw":
											set line 1 of the loop-block to ".MineStileStfw."
										else if line 1 of loop-block contains "Stf":
											set line 1 of the loop-block to ".MineStileStf."
											if line 2 of loop-block contains ",S" or ",C" or ",G":
												set line 3 of loop-block to "&a&l請進入"
											else if line 2 of loop-block contains ",O":
												set line 3 of loop-block to "&a&l請離開"
										else if line 1 of loop-block contains "CuC":
											set line 1 of the loop-block to ".MineStileCuC."
											set line 3 of loop-block to "&a&l請進入"
											loop blocks in radius 2 around the loop-block-1:
												if line 1 of loop-block-2 is not "[MineStileStat]":
													if line 1 of loop-block-1 or line 3 of loop-block-1 contains "CuC":
														if line 1 of loop-block-2 or line 3 of loop-block-2 contains "Key":
															if line 2 of loop-block-2 is line 2 of loop-block-1:
																set line 1 of loop-block-2 to ".MineStileKey."
																set line 3 of loop-block-2 to "&a&l請進入"
																set block below the loop-block-2 to light green wool
										set line 4 of the loop-block to "&6&lMineStile"
										loop blocks in radius 120 around the clicked block:
											if line 1 of loop-block-2 is "[MineStileStat]":
												if line 3 of loop-block-2 contains line 3 of clicked block:
													if line 2 of loop-block-2 is line 2 of clicked block:
														set line 4 of loop-block-2 to "&d&lStat: &c&lNIS"
														set block behind loop-block-2 to light green wool
									else if player's tool is Rose Red:
										set block below the loop-block to red wool
										set block below the block behind the loop-block to red wool
										if line 1 of loop-block contains "Stfw":
											set line 3 of the loop-block to "Stfw"
										else if line 1 of loop-block contains "Stf":
											set line 3 of the loop-block to "Stf"
										else if line 1 of loop-block contains "CuC":
											set line 3 of the loop-block to "CuC"
											loop blocks in radius 2 around the loop-block-1:
												if line 1 of loop-block-2 is not "[MineStileStat]":
													if line 1 of loop-block-1 or line 3 of loop-block-1 contains "CuC":
														if line 1 of loop-block-2 or line 3 of loop-block-2 contains "Key":
															if line 2 of loop-block-2 is line 2 of loop-block-1:
																set line 1 of loop-block-2 to "&c&l[暫停使用]"
																set line 3 of loop-block-2 to "Key"
																set block below the loop-block-2 to red wool
										loop blocks in radius 120 around the clicked block:
											if line 1 of loop-block-2 is "[MineStileStat]":
												if line 3 of loop-block-2 contains line 3 of clicked block:
													if line 2 of loop-block-2 is line 2 of clicked block:
														set line 4 of loop-block-2 to "&d&lStat: &4&lISO"
														set block behind loop-block-2 to red wool
										set line 1 of the loop-block to "&c&l[暫停使用]"
										set line 4 of the loop-block to "&6&lMineStile"
					else if line 3 of clicked block contains "Fee":
						if line 1 of loop-block contains "[MineStileFee":
							if line 2 of loop-block is line 2 of clicked block:
								if line 1 of loop-block contains line 3 of clicked block:
									if player's tool is Gray Dye:
										set block below the loop-block to red wool
										if line 1 of loop-block contains "FeeN":
											set line 3 of the loop-block to "FeeN"
										else if line 1 of loop-block contains "FeeW":
											set line 3 of the loop-block to "FeeW"
											set block below the block 3 blocks right loop-block to red wool
										loop blocks in radius 120 around the clicked block:
											if line 1 of loop-block-2 is "[MineStileStat]":
												if line 3 of loop-block-2 contains line 3 of clicked block:
													if line 2 of loop-block-2 is line 2 of clicked block:
														set line 4 of loop-block-2 to "&d&lStat: &c&lNIS"
														set block behind loop-block-2 to red wool
														set line 4 of the loop-block-1 to "&d&lMineStile"
									else if player's tool is Rose Red:
										set block below the loop-block to redstone block
										if line 1 of loop-block contains "FeeN":
											set line 3 of the loop-block to "FeeN"
										else if line 1 of loop-block contains "FeeW":
											set line 3 of the loop-block to "FeeW"
											set block below the block 3 blocks right loop-block to redstone block
										loop blocks in radius 120 around the clicked block:
											if line 1 of loop-block-2 is "[MineStileStat]":
												if line 3 of loop-block-2 contains line 3 of clicked block:
													if line 2 of loop-block-2 is line 2 of clicked block:
														set line 4 of loop-block-2 to "&d&lStat: &4&lISO"
														set block behind loop-block-2 to redstone block
														set line 4 of the loop-block-1 to "&d&lMineStile"
									set line 1 of the loop-block to "&c&l[暫停使用]"
					if line 1 of loop-block is "&c&l[暫停使用]":
						if line 3 of loop-block is line 3 of clicked block:
							if line 2 of loop-block is line 2 of clicked block:
								if line 3 of clicked block contains "In" or "Out":
									if player's tool is Gray Dye:
										if line 3 of loop-block contains "InN" or "InW" or "OutN" or "OutW":
											set block below the loop-block to red wool
											if line 3 of loop-block contains "InW" or "OutW":
												set block below the block 3 blocks right loop-block to red wool
										if line 3 of loop-block contains "InL":
											set block behind the loop-block to red wool
											set line 3 of loop-block to "InL"
										if line 3 of loop-block contains "OutL":
											set block behind the loop-block to red wool
											set line 3 of loop-block to "OutL"
										if line 1 of loop-block contains "InM":
											set block behind the loop-block to red wool
											set line 3 of the loop-block to "InM"
										if line 1 of loop-block contains "OutL":
											set block behind the loop-block to red wool
											set line 3 of the loop-block to "OutL"
										loop blocks in radius 120 around the clicked block:
											if line 1 of loop-block-2 is "[MineStileStat]":
												if line 3 of loop-block-2 contains line 3 of clicked block:
													if line 2 of loop-block-2 is line 2 of clicked block:
														set line 4 of loop-block-2 to "&d&lStat: &c&lNIS"
														set block behind loop-block-2 to red wool
									else if player's tool is Rose Red:
										if line 1 of loop-block contains "InWT" or "OutWT":
											stop
										else if line 3 of loop-block contains "InN" or "InW" or "OutN" or "OutW":
											set block below the loop-block to redstone block
											if line 3 of loop-block contains "W":
												set block below the block 3 blocks right loop-block to redstone block
										if line 3 of loop-block contains "InL" or "OutL" or "InM" or "OutM":
											stop
										loop blocks in radius 120 around the clicked block:
											if line 1 of loop-block-2 is "[MineStileStat]":
												if line 3 of loop-block-2 contains line 3 of clicked block:
													if line 2 of loop-block-2 is line 2 of clicked block:
														set line 4 of loop-block-2 to "&d&lStat: &4&lISO"
														set block behind loop-block-2 to redstone block
								else if line 3 of clicked block contains "Stf" or "CuC":
									if line 2 of loop-block is line 2 of clicked block:
										if line 3 of loop-block is line 3 of clicked block:
											if player's tool is Gray Dye:
												set block below the loop-block to light green wool
												set block below the block behind the loop-block to redstone block
												loop blocks in radius 2 around the loop-block-1:
													if line 1 of loop-block-2 is not "[MineStileStat]":
														if line 1 of loop-block-1 or line 3 of loop-block-1 contains "CuC":
															if line 1 of loop-block-2 or line 3 of loop-block-2 contains "Key":
																if line 2 of loop-block-2 is line 2 of loop-block-1:
																	set line 1 of loop-block-2 to ".MineStileKey."
																	set line 3 of loop-block-2 to "&a&l請進入"
																	set block below the loop-block-2 to light green wool
												loop blocks in radius 120 around the clicked block:
													if line 1 of loop-block-2 is "[MineStileStat]":
														if line 3 of loop-block-2 contains line 3 of clicked block:
															if line 2 of loop-block-2 is line 2 of clicked block:
																set line 4 of loop-block-2 to "&d&lStat: &c&lNIS"
																set block behind loop-block-2 to light green wool
												if line 3 of loop-block is "Stfw":
													set line 1 of loop-block to ".MineStileStfw."
												else if line 3 of loop-block is "Stf":
													set line 1 of loop-block to ".MineStileStf."
												else if line 3 of loop-block is "CuC":
													set line 1 of loop-block to ".MineStileCuC."
												set line 3 of the loop-block to "&a&l請進入"
												set line 4 of the loop-block to "&6&lMineStile"
											else if player's tool is Rose Red:
												set block below the loop-block to red wool
												set block below the block behind the loop-block to red wool
												loop blocks in radius 120 around the clicked block:
													if line 1 of loop-block-2 is "[MineStileStat]":
														if line 3 of loop-block-2 contains line 3 of clicked block:
															if line 2 of loop-block-2 is line 2 of clicked block:
																set line 4 of loop-block-2 to "&d&lStat: &4&lISO"
																set block behind loop-block-2 to red wool
												set line 1 of the loop-block to "&c&l[暫停使用]"
												set line 4 of the loop-block to "&6&lMineStile"
								else if line 3 of clicked block contains "Fee":
									if line 2 of loop-block is line 2 of clicked block:
										if line 3 of loop-block contains line 3 of clicked block:
											if player's tool is Gray Dye:
												set block below the loop-block to red wool
												if line 3 of loop-block contains "FeeW":
													set block below the block 3 blocks right loop-block to red wool
												loop blocks in radius 120 around the clicked block:
													if line 1 of loop-block-2 is "[MineStileStat]":
														if line 3 of loop-block-2 contains line 3 of clicked block:
															if line 2 of loop-block-2 is line 2 of clicked block:
																set line 4 of loop-block-2 to "&d&lStat: &c&lNIS"
																set block behind loop-block-2 to red wool
																set line 4 of the loop-block-1 to "&d&lMineStile"
											else if player's tool is Rose Red:
												set block below the loop-block to redstone block
												if line 3 of loop-block contains "FeeW":
													set block below the block 3 blocks right loop-block to redstone block
												loop blocks in radius 120 around the clicked block:
													if line 1 of loop-block-2 is "[MineStileStat]":
														if line 3 of loop-block-2 contains line 3 of clicked block:
															if line 2 of loop-block-2 is line 2 of clicked block:
																set line 4 of loop-block-2 to "&d&lStat: &4&lISO"
																set block behind loop-block-2 to redstone block
																set line 4 of the loop-block-1 to "&d&lMineStile"
											set line 1 of the loop-block to "&c&l[暫停使用]"
				else if player's tool is Cactus Green:
					if line 1 of loop-block or line 3 of loop-block contains line 3 of clicked block:
						if line 2 of loop-block contains line 2 of clicked block:
							loop blocks in radius 120 around the clicked block:
								if line 1 of loop-block-2 is "[MineStileStat]":
									if line 3 of loop-block-2 contains line 3 of clicked block:
										if line 2 of loop-block-2 is line 2 of clicked block:
											set line 4 of loop-block-2 to "&d&lStat: &a&lNOR"
											set block behind loop-block-2 to light green wool
											if line 3 of clicked block contains "CuC" or "Stf":
												set block behind loop-block-2 to black wool
							loop blocks in radius 2 around the loop-block-1:
								if line 1 of loop-block-2 is not "[MineStileStat]":
									if line 1 of loop-block-1 or line 3 of loop-block-1 contains "CuC":
										if line 1 of loop-block-2 or line 3 of loop-block-2 contains "Key":
											if line 2 of loop-block-2 is line 2 of loop-block-1:
												set line 1 of loop-block-2 to "&c&l[暫停使用]"
												set line 3 of loop-block-2 to "Key"
												set block below the loop-block-2 to red wool
							if line 3 of the loop-block-1 is "InN":
								set line 1 of the loop-block-1 to "[MineStileInN]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block below the loop-block-1 to redstone block

							else if line 3 of the loop-block-1 is "OutN":
								set line 1 of the loop-block-1 to "[MineStileOutN]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block below the loop-block-1 to redstone block
								
							else if line 3 of the loop-block-1 is "InW":
								set line 1 of the loop-block-1 to "[MineStileInW]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block below the loop-block-1 to redstone block
								set block below the block 3 blocks right loop-block-1 to redstone block
								
							else if line 3 of the loop-block-1 is "OutW":
								set line 1 of the loop-block-1 to "[MineStileOutW]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block below the loop-block-1 to redstone block
								set block below the block 3 blocks right loop-block-1 to redstone block
							
							else if line 3 of the loop-block-1 is "InWT":
								set line 1 of the loop-block-1 to "[MineStileInWT]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block below the block 3 blocks behind loop-block-1 to redstone block
								set block below the block 3 blocks behind the block 3 blocks right loop-block-1 to redstone block
							
							else if line 3 of the loop-block-1 is "OutWT":
								set line 1 of the loop-block-1 to "[MineStileOutWT]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block below the block 3 blocks behind loop-block-1 to redstone block
								set block below the block 3 blocks behind the block 3 blocks right loop-block-1 to redstone block
								
							else if line 3 of the loop-block-1 is "InL":
								set line 1 of the loop-block-1 to "[MineStileInL]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block behind the loop-block to orange wool
								
							else if line 3 of the loop-block-1 is "OutL":
								set line 1 of the loop-block-1 to "[MineStileOutL]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block behind the loop-block to green wool
							
							else if line 3 of the loop-block-1 is "InM":
								set line 1 of the loop-block-1 to "[MineStileInM]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block behind the loop-block to orange wool
								
							else if line 3 of the loop-block-1 is "OutM":
								set line 1 of the loop-block-1 to "[MineStileOutM]"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block behind the loop-block to green wool
							
							else if line 3 of the loop-block-1 is "FeeN":
								set line 1 of the loop-block-1 to "[MineStileFeeN]"
								set line 3 of the loop-block-1 to "&a&l請拍卡繳費"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block below the loop-block-1 to redstone block
							
							else if line 3 of the loop-block-1 is "FeeW":
								set line 1 of the loop-block-1 to "[MineStileFeeW]"
								set line 3 of the loop-block-1 to "&a&l請拍卡繳費"
								set line 4 of the loop-block-1 to "&d&lMineStile"
								set block below the loop-block-1 to redstone block
								set block below the block 3 blocks right loop-block-1 to redstone block			
								
							else if line 3 of the loop-block-1 is "Q":
								set line 1 of the loop-block-1 to "[MineStileQ]"
								set line 2 of the loop-block-1 to "&d&l車票資訊查閱器"
								set line 3 of the loop-block-1 to "&a&l請拍卡/車票"
								set line 4 of the loop-block-1 to "&6&lMineStile"
							
							else if line 3 of the loop-block-1 is "V50":
								set line 1 of the loop-block-1 to "[MineStileV50]"
								set line 2 of the loop-block-1 to "&l增值金額: &a&l$50"
								set line 3 of the loop-block-1 to "&d&l車票增值器 &a&l請拍卡"
								set line 4 of the loop-block-1 to "&6&lMineStile"
							
							else if line 3 of the loop-block-1 is "V100":
								set line 1 of the loop-block-1 to "[MineStileV100]"
								set line 2 of the loop-block-1 to "&l增值金額: &a&l$100"
								set line 3 of the loop-block-1 to "&d&l車票增值器 &a&l請拍卡"
								set line 4 of the loop-block-1 to "&6&lMineStile"
								
							else if line 3 of the loop-block-1 is "FV":
								set line 1 of the loop-block-1 to "[MineStileFV]"
								set line 2 of the loop-block-1 to "&d&l免費乘車確認器"
								set line 3 of the loop-block-1 to "&a&l請拍卡"
								set line 4 of the loop-block-1 to "&6&lMineStile"
							
							else if line 3 of the loop-block-1 is "CI":
								set line 1 of the loop-block-1 to "[MineStileCI]"
								set line 2 of the loop-block-1 to "&d&l自動發卡器"
								set line 3 of the loop-block-1 to "&a&l請按此"
								set line 4 of the loop-block-1 to "&6&lMineStile"
							
							else if line 1 of the loop-block-1 contains "MineStileStfw":
								set line 1 of the loop-block-1 to "[MineStileStfw]"
								set line 3 of the loop-block-1 to "&c&l職員專用"
								set block below the loop-block-1 to black wool
								set block below the block behind the loop-block-1 to black wool
								set line 4 of the loop-block-1 to "&6&lMineStile"
								
							else if line 3 of the loop-block-1 is "Stfw":
								set line 1 of the loop-block-1 to "[MineStileStfw]"
								set line 3 of the loop-block-1 to "&c&l職員專用"
								set block below the loop-block-1 to black wool
								set block below the block behind the loop-block-1 to black wool
								set line 4 of the loop-block-1 to "&6&lMineStile"
								
							else if line 1 of the loop-block-1 contains "MineStileStf":
								set line 1 of the loop-block-1 to "[MineStileStf]"
								set line 3 of the loop-block-1 to "&c&l職員專用"
								set block below the loop-block-1 to black wool
								set block below the block behind the loop-block-1 to black wool
								set line 4 of the loop-block-1 to "&6&lMineStile"
								
							else if line 3 of the loop-block-1 is "Stf":
								set line 1 of the loop-block-1 to "[MineStileStf]"
								set line 3 of the loop-block-1 to "&c&l職員專用"
								set block below the loop-block-1 to black wool
								set block below the block behind the loop-block-1 to black wool
								set line 4 of the loop-block-1 to "&6&lMineStile"
							
							else if line 1 of the loop-block-1 contains "MineStileCuC":
								set line 1 of the loop-block-1 to "[MineStileCuC]"
								set line 3 of the loop-block-1 to "&c&l職員專用"
								set block below the loop-block-1 to black wool
								set block below the block behind the loop-block-1 to black wool
								set line 4 of the loop-block-1 to "&6&lMineStile"	
								
							else if line 3 of the loop-block-1 is "CuC":
								set line 1 of the loop-block-1 to "[MineStileCuC]"
								set line 3 of the loop-block-1 to "&c&l職員專用"
								set block below the loop-block-1 to black wool
								set block below the block behind the loop-block-1 to black wool
								set line 4 of the loop-block-1 to "&6&lMineStile"
	# Gates Remote Control #
	
	# Self Service Point #
#	else if line 1 of clicked block is "[MineStileSSP]":
#		wait 0.2 second
#		open chest with 1 rows named "歡迎使用自助客務機 請選擇功能" to player
#		wait 0.2 second
#		format slot 2 of event-player with Name Tag of Unbreaking 5 named "Buy Cards"
#		format slot 4 of event-player with Paper of Unbreaking 5 named "Buy Single Journey Tickets"
#		format slot 6 of event-player with Gold Ingot named "Card Adding Value"
#		format slot 8 of player with 
	# Set to Not In Use (Turn Off for Gates) #
	if player is holding a Gray Dye:
		if {staff.%player%} is true:
			if line 1 of clicked block is not "[MineStileStat]":
				if line 1 of the clicked block is "[MineStileInN]" or "[MineStileInW]" or "[MineStileInL]" or "[MineStileInM]" or "[MineStileInWT]":
					if line 1 of the clicked block is "[MineStileInN]":
						set line 3 of the clicked block to "InN"
						set block below the clicked block to red wool
					else if line 1 of the clicked block is "[MineStileInW]":
						set line 3 of the clicked block to "InW"
						set block below the clicked block to red wool
						set block below the block 3 blocks right clicked block to red wool
					else if line 1 of the clicked block is "[MineStileInL]":
						set line 3 of the clicked block to "InL"
						set block behind the clicked block to red wool
					else if line 1 of the clicked block is "[MineStileInM]":
						set line 3 of the clicked block to "InM"
						set block behind the clicked block to red wool
					else if line 1 of the clicked block is "[MineStileInWT]":
						set line 3 of the clicked block to "InWT"
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					
				else if line 3 of the clicked block is "InN" or "InW" or "InL" or "InM":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					if line 3 of the clicked block is "InN":
						set block below the clicked block to red wool
					else if line 3 of clicked block is "InW":
						set block below the clicked block to red wool
						set block below the block 3 blocks right clicked block to red wool
					else if line 3 of clicked block is "InL" or "InM":
						set block behind the clicked block to red wool
					else if line 3 of clicked block is "InWT":
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
				
				else if line 1 of the clicked block is "[MineStileOutN]" or "[MineStileOutW]" or "[MineStileOutL]" or "[MineStileOutM]" or "[MineStileOutWT]":
					if line 1 of the clicked block is "[MineStileOutN]":
						set line 3 of the clicked block to "OutN"
						set block below the clicked block to red wool
					else if line 1 of the clicked block is "[MineStileOutW]":
						set line 3 of the clicked block to "OutW"
						set block below the clicked block to red wool
						set block below the block 3 blocks right clicked block to red wool
					else if line 1 of the clicked block is "[MineStileOutL]":
						set line 3 of the clicked block to "OutL"
						set block behind the clicked block to red wool
					else if line 1 of the clicked block is "[MineStileOutM]":
						set line 3 of the clicked block to "OutM"
						set block behind the clicked block to red wool
					else if line 1 of the clicked block is "[MineStileOutWT]":
						set line 3 of the clicked block to "OutWT"
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
						
				else if line 3 of the clicked block is "OutN" or "OutW" or "OutL" or "OutM":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					if line 3 of clicked block is "OutN":
						set block below the clicked block to red wool
					else if line 3 of clicked block is "OutW":
						set block below the clicked block to red wool
						set block below the block 3 blocks right clicked block to red wool
					else if line 3 of clicked block is "OutL" or "OutM":
						set block behind the clicked block to red wool
					else if line 3 of clicked block is "OutWT":
						set block below the block 3 blocks behind clicked block to red wool
						set block below the block 3 blocks behind the block 3 blocks right clicked block to red wool
						
				else if line 1 of the clicked block is "[MineStileFeeN]" or "[MineStileFeeW]":
					if line 1 of the clicked block is "[MineStileFeeN]":
						set line 3 of the clicked block to "FeeN"
					else if line 1 of the clicked block is "[MineStileFeeW]":
						set line 3 of the clicked block to "FeeW"
						set block below the block 3 blocks right clicked block to red wool	
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to red wool
						
				else if line 3 of the clicked block is "FeeN" or "FeeW":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to red wool
					if line 3 of clicked block is "FeeW":
						set block below the block 3 blocks right clicked block to red wool
					
				else if line 1 of the clicked block is "[MineStileFV]":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 2 of the clicked block to ""
					set line 3 of the clicked block to "FV"
					set line 4 of the clicked block to "&6&lMineStile"

				else if line 1 of the clicked block is "[MineStileCI]":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 2 of the clicked block to ""
					set line 3 of the clicked block to "CI"
					set line 4 of the clicked block to "&6&lMineStile"
				
				else if line 1 of the clicked block is "[MineStileQ]":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 2 of the clicked block to ""
					set line 3 of the clicked block to "Q"
					set line 4 of the clicked block to "&6&lMineStile"
				
				else if line 1 of the clicked block is "[MineStileV50]":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 2 of the clicked block to ""
					set line 3 of the clicked block to "V50"
					set line 4 of the clicked block to "&6&lMineStile"
	
				else if line 1 of the clicked block is "[MineStileV100]":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 2 of the clicked block to ""
					set line 3 of the clicked block to "V100"
					set line 4 of the clicked block to "&6&lMineStile"
				
				else if line 1 of the clicked block is "[MineStileCuC]":
					set line 1 of the clicked block to ".MineStileCuC."
					set line 3 of the clicked block to "&a&l請進入"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to light green wool
					set block below the block behind the clicked block to redstone block
				
				else if line 3 of the clicked block is "CuC":
					set line 1 of the clicked block to ".MineStileCuC."
					set line 3 of the clicked block to "&a&l請進入"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to light green wool
					set block below the block behind the clicked block to redstone block
					
				else if line 1 of the clicked block is "[MineStileStfw]":
					set line 1 of the clicked block to ".MineStileStfw."
					set line 3 of the clicked block to "&a&l請進入"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to light green wool
					set block below the block behind the clicked block to redstone block
				
				else if line 3 of the clicked block is "Stfw":
					set line 1 of the clicked block to ".MineStileStfw."
					set line 3 of the clicked block to "&a&l請進入"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to light green wool
					set block below the block behind the clicked block to redstone block	
				
				else if line 1 of the clicked block is "[MineStileStf]":
					set line 1 of the clicked block to ".MineStileStf."
					if line 2 of the clicked block contains ",O" or ",C":
						set line 3 of the clicked block to "&a&l請離開"
					else:
						set line 3 of the clicked block to "&a&l請進入"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to light green wool
					set block below the block behind the clicked block to redstone block
					
				else if line 3 of the clicked block is "Stf":
					set line 1 of the clicked block to ".MineStileStf."
					if line 2 of the clicked block contains ",O" or ",C":
						set line 3 of the clicked block to "&a&l請離開"
					else:
						set line 3 of the clicked block to "&a&l請進入"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to light green wool
					set block below the block behind the clicked block to redstone block
				
				if line 1 or line 3 of clicked block doesn't contain "CI" or "Q" or "V":
					loop blocks in radius 120 around the clicked block:
						if line 1 of loop-block is "[MineStileStat]":
							if line 1 of clicked block or line 3 of the clicked block contains line 3 of loop-block:
								if line 2 of loop-block is line 2 of clicked block:
									set line 4 of loop-block to "&d&lStat: &c&lNIS"
									set block behind loop-block to red wool
									if line 1 of clicked block contains "CuC" or "Stf":
										set block behind loop-block to light green wool
					loop blocks in radius 5 around the clicked block:
						if line 1 of loop-block is not "[MineStileStat]":
							if line 1 of clicked block or line 3 of clicked block contains "Stfw":
								if line 1 of loop-block or line 3 of loop-block contains "Stfw":
									if line 2 of loop-block is line 2 of clicked block:
										set line 1 of loop-block to ".MineStileStfw."
										set line 3 of loop-block to "&a&l請進入"
										set block below the loop-block to light green wool
					loop blocks in radius 3 around the clicked block:
						if line 1 of loop-block is not "[MineStileStat]":
							if line 1 of clicked block or line 3 of clicked block contains "CuC":
								if line 1 of loop-block or line 3 of loop-block contains "Key":
									if line 2 of loop-block is line 2 of clicked block:
										set line 1 of loop-block to ".MineStileKey."
										set line 3 of loop-block to "&a&l請進入"
										set block below the loop-block to light green wool
				delete {wait.%player%}
	# Set to Not In Use (Turn Off for Gates) #
	
	# Set to Not In Use #
	if player is holding Rose Red:
		if {staff.%player%} is true:
			if line 1 of clicked block is not "[MineStileStat]":
				if line 1 of the clicked block is "[MineStileInN]" or "[MineStileInW]":
					if line 1 of the clicked block is "[MineStileInN]":
						set line 3 of the clicked block to "InN"
					else if line 1 of the clicked block is "[MineStileInW]":
						set line 3 of the clicked block to "InW"
						set block below the block 3 blocks right clicked block to redstone block
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
				
				else if line 3 of the clicked block is "InN" or "InW":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					if line 3 of clicked block is "InW":
						set block below the block 3 blocks right clicked block to redstone block
						
				else if line 1 of the clicked block is "[MineStileOutN]" or "[MineStileOutW]":
					if line 1 of the clicked block is "[MineStileOutN]":
						set line 3 of the clicked block to "OutN"
					else if line 1 of the clicked block is "[MineStileOutW]":
						set line 3 of the clicked block to "OutW"
						set block below the block 3 blocks right clicked block to redstone block	
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block	
				
				else if line 3 of the clicked block is "OutN" or "OutW":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					if line 3 of clicked block is "OutW":
						set block below the block 3 blocks right clicked block to redstone block
						
				else if line 1 of the clicked block is "[MineStileFeeN]" or "[MineStileFeeW]":
					if line 1 of the clicked block is "[MineStileFeeN]":
						set line 3 of the clicked block to "FeeN"
					else if line 1 of the clicked block is "[MineStileFeeW]":
						set line 3 of the clicked block to "FeeW"
						set block below the block 3 blocks right clicked block to redstone block
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
						
				else if line 3 of the clicked block is "FeeN" or "FeeW":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					if line 3 of clicked block is "FeeW":
						set block below the block 3 blocks right clicked block to redstone block
				
				else if line 1 of the clicked block contains "MineStileStfw":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 3 of the clicked block to "Stfw"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to red wool
					set block below the block behind the clicked block to red wool
				
				else if line 1 of the clicked block contains "MineStileStf":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 3 of the clicked block to "Stf"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to red wool
					set block below the block behind the clicked block to red wool
				
					
				else if line 1 of the clicked block contains "MineStileCuC":
					set line 1 of the clicked block to "&c&l[暫停使用]"
					set line 3 of the clicked block to "CuC"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to red wool
					set block below the block behind the clicked block to red wool
				
				loop blocks in radius 120 around the clicked block:
					if line 1 of loop-block is "[MineStileStat]":
						if line 3 of the clicked block contains line 3 of loop-block:
							if line 2 of loop-block is line 2 of clicked block:
								set line 4 of loop-block to "&d&lStat: &4&lISO"
								set block behind loop-block to redstone block
								if line 3 of clicked block contains "CuC" or "Stf":
									set block behind loop-block to red wool
				loop blocks in radius 5 around the clicked block:
					if line 1 of loop-block is not "[MineStileStat]":
						if line 1 of clicked block or line 3 of clicked block contains "Stfw":
							if line 1 of loop-block or line 3 of loop-block contains "Stfw":
								if line 2 of loop-block is line 2 of clicked block:
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "Stfw"
									set block below the loop-block to red wool
				loop blocks in radius 3 around the clicked block:
					if line 1 of loop-block is not "[MineStileStat]":
						if line 1 of clicked block or line 3 of clicked block contains "CuC":
							if line 1 of loop-block or line 3 of loop-block contains "Key":
								if line 2 of loop-block is line 2 of clicked block:
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "Key"
									set block below the loop-block to red wool
				delete {wait.%player%}
	# Set to Not In Use #
	
	# Set to Normal State #
	if player is holding Cactus Green:
		if {staff.%player%} is true:
			if line 1 of clicked block is not "[MineStileStat]":
				if line 1 or line 3 of clicked block doesn't contain "CI" or "Q" or "V":
					loop blocks in radius 120 around the clicked block:
						if line 1 of loop-block is "[MineStileStat]":
							if line 1 of clicked block or line 3 of clicked block contains line 3 of loop-block:
								if line 2 of loop-block is line 2 of clicked block:
									set line 4 of loop-block to "&d&lStat: &a&lNOR"
									set block behind loop-block to light green wool
									if line 1 of clicked block or line 3 of clicked block contains "CuC" or "Stf":
										set block behind loop-block to black wool
				if line 1 of the clicked block is "[MineStileInN]":
					set line 1 of the clicked block to "[MineStileInN]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					
				else if line 3 of the clicked block is "InN":
					set line 1 of the clicked block to "[MineStileInN]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					
				else if line 1 of the clicked block is "[MineStileOutN]":
					set line 1 of the clicked block to "[MineStileOutN]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
				
				else if line 3 of the clicked block is "OutN":
					set line 1 of the clicked block to "[MineStileOutN]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					
				else if line 1 of the clicked block is "[MineStileInW]":
					set line 1 of the clicked block to "[MineStileInW]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					set block below the block 3 blocks right clicked block to redstone block
				
				else if line 3 of the clicked block is "InW":
					set line 1 of the clicked block to "[MineStileInW]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					set block below the block 3 blocks right clicked block to redstone block
					
				else if line 1 of the clicked block is "[MineStileOutW]":
					set line 1 of the clicked block to "[MineStileOutW]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set block below the clicked block to redstone block
					set block below the block 3 blocks right clicked block to redstone block
				
				else if line 3 of the clicked block is "OutW":
					set line 1 of the clicked block to "[MineStileOutW]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
					set block below the block 3 blocks right clicked block to redstone block
				
				else if line 1 of the clicked block is "[MineStileInWT]":
					set line 1 of the clicked block to "[MineStileInWT]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				
				else if line 3 of the clicked block is "InWT":
					set line 1 of the clicked block to "[MineStileInWT]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"				
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
					
				else if line 1 of the clicked block is "[MineStileOutWT]":
					set line 1 of the clicked block to "[MineStileOutWT]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				
				else if line 3 of the clicked block is "OutWT":
					set line 1 of the clicked block to "[MineStileOutWT]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"				
					set block below the block 3 blocks behind clicked block to redstone block
					set block below the block 3 blocks behind the block 3 blocks right clicked block to redstone block
				
				else if line 1 of the clicked block is "[MineStileInL]":
					set line 1 of the clicked block to "[MineStileInL]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block behind the clicked block to orange wool
					
				else if line 3 of the clicked block is "InL":
					set line 1 of the clicked block to "[MineStileInL]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block behind the clicked block to orange wool
					
				else if line 1 of the clicked block is "[MineStileOutL]":
					set line 1 of the clicked block to "[MineStileOutL]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block behind the clicked block to green wool
				
				else if line 3 of the clicked block is "OutL":
					set line 1 of the clicked block to "[MineStileOutL]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block behind the clicked block to green wool
					
				else if line 1 of the clicked block is "[MineStileInM]":
					set line 1 of the clicked block to "[MineStileInM]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block behind the clicked block to orange wool
					
				else if line 3 of the clicked block is "InM":
					set line 1 of the clicked block to "[MineStileInM]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block behind the clicked block to orange wool
					
				else if line 1 of the clicked block is "[MineStileOutM]":
					set line 1 of the clicked block to "[MineStileOutM]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block behind the clicked block to green wool
				
				else if line 3 of the clicked block is "OutM":
					set line 1 of the clicked block to "[MineStileOutM]"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&d&lMineStile"
					set block behind the clicked block to green wool
				
				else if line 1 of the clicked block is "[MineStileFeeN]" or "[MineStileFeeW]":
					if line 1 of the clicked block is "[MineStileFeeW]":
						set block below the block 3 blocks right clicked block to redstone block
					set line 3 of the clicked block to "&a&l請拍卡繳費"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
						
				else if line 3 of the clicked block is "FeeN" or "FeeW":
					if line 3 of the clicked block is "FeeN":
						set line 1 of the clicked block to "[MineStileFeeN]"
					else if line 3 of the clicked block is "FeeW":
						set line 1 of the clicked block to "[MineStileFeeW]"
						set block below the block 3 blocks right clicked block to redstone block
					set line 3 of the clicked block to "&a&l請拍卡繳費"
					set line 4 of the clicked block to "&d&lMineStile"
					set block below the clicked block to redstone block
						
				else if line 1 of the clicked block is "[MineStileQ]":
					set line 1 of the clicked block to "[MineStileQ]"
					set line 2 of the clicked block to "&d&l車票資訊查閱器"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&6&lMineStile"
					
				else if line 3 of the clicked block is "Q":
					set line 1 of the clicked block to "[MineStileQ]"
					set line 2 of the clicked block to "&d&l車票資訊查閱器"
					set line 3 of the clicked block to "&a&l請拍卡/車票"
					set line 4 of the clicked block to "&6&lMineStile"
				
				else if line 1 of the clicked block is "[MineStileV50]": 
					set line 1 of the clicked block to "[MineStileV50]"
					set line 2 of the clicked block to "&l增值金額: &a&l$50"
					set line 3 of the clicked block to "&d&l車票增值器 &a&l請拍卡"
					set line 4 of the clicked block to "&6&lMineStile"
				
				else if line 3 of the clicked block is "V50":
					set line 1 of the clicked block to "[MineStileV50]"
					set line 2 of the clicked block to "&l增值金額: &a&l$50"
					set line 3 of the clicked block to "&d&l車票增值器 &a&l請拍卡"
					set line 4 of the clicked block to "&6&lMineStile"
				
				else if line 1 of the clicked block is "[MineStileV100]":
					set line 1 of the clicked block to "[MineStileV100]"
					set line 2 of the clicked block to "&l增值金額: &a&l$100"
					set line 3 of the clicked block to "&d&l車票增值器 &a&l請拍卡"
					set line 4 of the clicked block to "&6&lMineStile"
				
				else if line 3 of the clicked block is "V100":
					set line 1 of the clicked block to "[MineStileV100]"
					set line 2 of the clicked block to "&l增值金額: &a&l$100"
					set line 3 of the clicked block to "&d&l車票增值器 &a&l請拍卡"
					set line 4 of the clicked block to "&6&lMineStile"
					
				else if line 1 of the clicked block is "[MineStileFV]":
					set line 1 of the clicked block to "[MineStileFV]"
					set line 2 of the clicked block to "&d&l免費乘車確認器"
					set line 3 of the clicked block to "&a&l請拍卡"
					set line 4 of the clicked block to "&6&lMineStile"
				
				else if line 3 of the clicked block is "FV":
					set line 1 of the clicked block to "[MineStileFV]"
					set line 2 of the clicked block to "&d&l免費乘車確認器"
					set line 3 of the clicked block to "&a&l請拍卡"
					set line 4 of the clicked block to "&6&lMineStile"
					
				else if line 3 of the clicked block is "CI":
					set line 1 of the clicked block to "[MineStileCI]"
					set line 2 of the clicked block to "&d&l自動發卡器"
					set line 3 of the clicked block to "&a&l請按此"
					set line 4 of the clicked block to "&6&lMineStile"
					
				else if line 1 of the clicked block contains "MineStileStfw":
					set line 1 of the clicked block to "[MineStileStfw]"
					set line 3 of the clicked block to "&c&l職員專用"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to black wool
					set block below the block behind the clicked block to black wool
				
				else if line 3 of the clicked block is "Stfw":
					set line 1 of the clicked block to "[MineStileStfw]"
					set line 3 of the clicked block to "&c&l職員專用"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to black wool
					set block below the block behind the clicked block to black wool
					
				else if line 1 of the clicked block contains "MineStileStf":
					set line 1 of the clicked block to "[MineStileStf]"
					set line 3 of the clicked block to "&c&l職員專用"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to black wool
					set block below the block behind the clicked block to black wool
				
				else if line 3 of the clicked block is "Stf":
					set line 1 of the clicked block to "[MineStileStf]"
					set line 3 of the clicked block to "&c&l職員專用"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to black wool
					set block below the block behind the clicked block to black wool
					
				else if line 1 of the clicked block contains "MineStileCuC":
					set line 1 of the clicked block to "[MineStileCuC]"
					set line 3 of the clicked block to "&c&l職員專用"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to black wool
					set block below the block behind the clicked block to black wool
				
				else if line 3 of the clicked block is "CuC":
					set line 1 of the clicked block to "[MineStileCuC]"
					set line 3 of the clicked block to "&c&l職員專用"
					set line 4 of the clicked block to "&6&lMineStile"
					set block below the clicked block to black wool
					set block below the block behind the clicked block to black wool
				
				else if line 3 of the clicked block is "TIn":
					set line 1 of the clicked block to "[MineStileTIn]"
					set line 3 of the clicked block to "&a&l空閒中"
					set line 4 of the clicked block to "&d&l按此開門"
					
				else if line 3 of the clicked block is "TL":
					set line 1 of the clicked block to "[MineStileTL]"
					set line 3 of the clicked block to "&a&l未上鎖"
					set line 4 of the clicked block to "&d&l按此鎖門"
				
				else if line 3 of the clicked block is "TO":
					set line 1 of the clicked block to "[MineStileTO]"
					set line 3 of the clicked block to "&a&l空閒中"
					set line 4 of the clicked block to "&d&l職員拍卡鎖門"
				
				else if line 3 of the clicked block is "TE":
					set line 1 of the clicked block to "[MineStileTE]"
					set line 3 of the clicked block to "&a&l緊急召援"
					set line 4 of the clicked block to "&d&l如需協助請按此"
					
				delete {wait.%player%}
				loop blocks in radius 5 around the clicked block:
					if line 1 of loop-block is not "[MineStileStat]":
						if line 1 of clicked block or line 3 of clicked block contains "Stfw":
							if line 1 of loop-block or line 3 of loop-block contains "Stfw":
								if line 2 of loop-block is line 2 of clicked block:
									set line 1 of loop-block to "[MineStileStfw]"
									set line 3 of loop-block to "&c&l職員專用"
									set block below the loop-block to black wool
				loop blocks in radius 3 around the clicked block:
					if line 1 of loop-block is not "[MineStileStat]":
						if line 1 of clicked block or line 3 of clicked block contains "CuC":
							if line 1 of loop-block or line 3 of loop-block contains "Key":
								if line 2 of loop-block is line 2 of clicked block:
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "Key"
									set block below the loop-block to red wool
	# Set to Normal State #
	
# Command Restriction in Paid Area #
on command:
	if command is "msg":
		stop
	else if player is op:
		stop
	else if {staff.%player%} is not set:
		if {onstation.%player%} is true:
			message "<red>你沒有使用此命令的權限"
			cancel event
# Command Restriction in Paid Area #

# Pressure Plate Gate Passing Detection #
on step on pressure plate:
	if the block is light weighted pressure plate:
		if {OutG.%player%} is true:
			delete {OutG.%player%}
	else:
		if {InG.%player%} is true:
			delete {InG.%player%}
		else if {wait.%player%} is true:
			delete {wait.%player%}
# Pressure Plate Gate Passing Detection #


# Commands #
command /mhelp:
	description: Show command help
	usage: /mhelp
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	trigger:
		message "[<red>MineStile<white>] 指令列表: <url:https://goo.gl/ud3hdj>https://goo.gl/ud3hdj"

command /mgivecard <player=%player%>:
	description: Get The SmartCard
	usage: /mgivecard <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mcard
	trigger:
		if player's inventory contain a name tag of unbreaking 5 named "%arg%'s SmartCard":
			message "[<red>MineStile<white>] 錯誤: 此玩家已擁有智能卡"
			message "<white>[MineStile <red>ERROR<white>] Failed to issue new card for %arg%. REASON: The player already has a card. Action performed by %player%" to console
			stop
		give arg a name tag of unbreaking 5 named "%arg%'s SmartCard"
		message "[<red>MineStile<white>] 系統發卡成功，費用 $150"
		message "[<red>MineStile<white>] 系統發卡成功，費用 $150，剩餘金錢: %player's balance%" to arg
		message "<white>[MineStile INFO] New Card Issued to %arg%, action performed by %player%" to console
		remove 150 from player's money
		if {balance.%arg%} is not set:
			set {balance.%arg%} to 100
			set {ticket.%player%} to 0
				

command /mstaff <player=%player%>:
	description: Set a player to staff which can enter staff area
	usage: /mstf <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mstf
	trigger:
		if {staff.%arg%} is true:
			message "[<red>MineStile<white>] 錯誤: 此玩家已是職員"
			message "<white>[MineStile <red>ERROR<white>] Failed to set %arg% to staff. REASON: The player is already a staff. Action performed by %player%" to console
		else:
			set {staff.%arg%} to true
			set {free.%arg%} to true
			delete {onstation.%arg%}
			message "[<red>MineStile<white>] 成功把 %arg% 設為職員"
			message "[<red>MineStile<white>] 你已被設為職員" to arg
			message "<white>[MineStile <orange>ALERT<white>] %arg% is set to <red>STAFF<white>, action performed by %player%" to console
				
command /munstaff <player=%player%>:
	description: Remove the staff identity of a player
	usage: /mustf <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mustf
	trigger:
		if {staff.%arg-1%} is not set:
			message "[<red>MineStile<white>] 錯誤: 此玩家不是職員"
			message "<white>[MineStile <red>ERROR<white>] Failed to set %arg% to NON-staff. REASON: The player is NOT a staff. Action performed by %player%" to console
		else:
			delete {staff.%arg%}
			delete {cucpw.%arg%}
			message "[<red>MineStile<white>] 成功撤銷 %arg% 的職員身分"
			message "[<red>MineStile<white>] 你已被撤銷職員身分" to arg
			message "<white>[MineStile <orange>ALERT<white>] %arg% is set to NON-STAFF, action performed by %player%" to console

command /mcardreset <player=%player%>:
	description: Reset card data of a player
	usage: /mcre <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mcre
	trigger:
		set {balance.%arg%} to 100
		delete {enter.%arg%}
		delete {exit.%arg%} 
		set {deducted.%arg%::1} to 0
		delete {staff.%arg%}
		delete {onstation.%arg%}
		delete {free.%arg%}
		delete {ftvalidated.%arg%}
		set {ticket.%arg%} to 0
		message "[<red>MineStile<white>] 成功重設 %arg% 的智能卡"
		message "[<red>MineStile<white>] 你的智能卡已被重設" to arg
		message "<white>[MineStile INFO] Card of %arg% is being reset, action performed by %player%" to console

command /mfreeride <player=%player%>:
	description: Give a free ride to a player's card 
	usage: /mfr <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mfr
	trigger:
		add 1 to {ticket.%arg%}
		message "[<red>MineStile<white>] 成功給予 %arg% 1 次免費車程，現時共尚餘 %{ticket.%arg%}% 次"
		message "[<red>MineStile<white>] 你已獲得 1 次免費車程，現時共尚餘 %{ticket.%arg%}% 次" to arg
		message "<white>[MineStile <orange>ALERT<white>] <yellow>1 FREE RIDE<white> is being given to %arg%, action performed by %player%" to console

command /msetfreeride <player> <number>:
	description: Give a free ride to a player's card 
	usage: /msetfr <player> <amount>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /msetfr
	trigger:
		set {ticket.%arg-1%} to arg-2
		message "[<red>MineStile<white>] 成功把 %arg-1% 剩餘的免費車程設為 %{ticket.%arg-1%}% 次"
		message "[<red>MineStile<white>] 剩餘免費車程已設為 %{ticket.%arg-1%}% 次" to arg-1
		message "<white>[MineStile <orange>ALERT<white>] <yellow>Remaining FREE RIDE<white> of %arg-1% is being set to %{ticket.%arg-1%}%, action performed by %player%" to console
command /mfreepass <player=%player%>:
	description: Give the permission to a player for free rides
	usage: /mfp <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mfp
	trigger:
		if {ftvalidated.%arg%} is true:
			set {free.%arg%} to true
			delete {ftvalidated.%arg%}
			message "[<red>MineStile<white>] 成功給予 %arg% 免費證"
			message "[<red>MineStile<white>] 你已獲得免費證" to arg-1
			message "<white>[MineStile <orange>ALERT<white>] <orange>FREE PASS<white> is being given to %arg%, action performed by %player%" to console
					
		else if {free.%arg%} is true:
			message "[<red>MineStile<white>] 錯誤: 此玩家已持有免費證"
			message "<white>[MineStile <red>ERROR<white>] Failed to give %arg% <orange>FREE PASS<white>. REASON: The player already have <orange>FREE PASS<white>. Action performed by %player%" to console
					
		else:
			set {free.%arg%} to true
			message "[<red>MineStile<white>] 成功給予 %arg% 免費證"
			message "[<red>MineStile<white>] 你已獲得免費證" to arg
			message "<white>[MineStile <orange>ALERT<white>] <orange>FREE PASS<white> is being given to %arg%, action performed by %player%" to console
				
command /munfreepass <player=%player%>:
	description: Give the permission to a player for free rides
	usage: /mufp <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mufp
	trigger:
		if {free.%arg%} is not set:
			message "[<red>MineStile<white>] 錯誤: 此玩家沒有免費證"
			message "<white>[MineStile <red>ERROR<white>] Failed to cancel <orange>FREE PASS<white> of %arg%. REASON: The player doesn't have <orange>FREE PASS<white>. Action performed by %player%" to console
		else:
			delete {ftvalidated.%arg%}
			delete {free.%arg%}
			message "[<red>MineStile<white>] 成功沒收 %arg% 的免費證"
			message "[<red>MineStile<white>] 你的免費證已被取消" to arg
			message "<white>[MineStile <orange>ALERT<white>] <orange>FREE PASS<white> of %arg% is being CANCELLED, action performed by %player%" to console
command /mticketinfo <player=%player%>:
	description: Interpret card data of a player
	usage: /mtinfo <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mtinfo
	trigger:
		message "[<red>MineStile<white>] 車票資訊:"
		message "卡主: <light green>%arg%"
		if {balance.%player%} is smaller than 1:
			message "本卡餘額: <light red>$%{balance.%arg%}%"
		else:
			message "本卡餘額: <light green>$%{balance.%arg%}%"
		message "最近入閘機號: <light green>%{enter.%arg%::1}%<light green>,%{enter.%arg%::2}%<light green>,%{enter.%arg%::3}%"
		message "最近出閘機號: <light green>%{exit.%arg%::1}%<light green>,%{exit.%arg%::2}%<light green>,%{exit.%arg%::3}%"
		if {ticket.%player%} is smaller than 1:
			message "剩餘免費車票: <light red>%{ticket.%arg%}%"
		else:
			message "剩餘免費車票: <light green>%{ticket.%arg%}%"
		if {onstation.%arg%} is not set:
			if {staff.%arg%} is true:
				message "已入閘: <light green>不適用"
			else:
				message "已入閘: <light red>否"
		if {onstation.%arg%} is true:
			message "已入閘: <light green>是"
		if {free.%arg%} is not set:
			message "可免費乘車: <light red>否"
		if {free.%arg%} is true:
			message "可免費乘車: <light green>是"
		if {staff.%arg%} is not set:
			message "職員: <light red>否"
		if {staff.%arg%} is true:
			message "職員: <light green>是"
			
		message "最近交易記錄: (最近起計)"
		if {deducted.%arg%::1} is smaller than 1:
			if {deducted.%arg%::6} is smaller than 1:
				message "第 1 筆: &c&l-$%(-1) * {deducted.%player%::1}% 第 6 筆: &c&l-$%(-1) * {deducted.%player%::6}%"
			else:
				message "第 1 筆: &c&l-$%(-1) * {deducted.%player%::1}% 第 6 筆: &a&l+$%{deducted.%player%::6}%"
		else:
			if {deducted.%arg%::6} is smaller than 1:
				message "第 1 筆: &a&l+$%{deducted.%player%::1}% 第 6 筆: &c&l-$%(-1) * {deducted.%player%::6}%"
			else:
				message "第 1 筆: &a&l+$%{deducted.%player%::1}% 第 6 筆: &a&l+$%{deducted.%player%::6}%"
		if {deducted.%arg%::2} is smaller than 1:
			if {deducted.%arg%::7} is smaller than 1:
				message "第 2 筆: &c&l-$%(-1) * {deducted.%player%::2}% 第 7 筆: &c&l-$%(-1) * {deducted.%player%::7}%"
			else:
				message "第 2 筆: &c&l-$%(-1) * {deducted.%player%::2}% 第 7 筆: &a&l+$%{deducted.%player%::7}%"
		else:
			if {deducted.%arg%::7} is smaller than 1:
				message "第 2 筆: &a&l+$%{deducted.%player%::2}% 第 7 筆: &c&l-$%(-1) * {deducted.%player%::7}%"
			else:
				message "第 2 筆: &a&l+$%{deducted.%player%::2}% 第 7 筆: &a&l+$%{deducted.%player%::7}%"
		if {deducted.%arg%::3} is smaller than 1:
			if {deducted.%arg%::8} is smaller than 1:
				message "第 3 筆: &c&l-$%(-1) * {deducted.%player%::3}% 第 8 筆: &c&l-$%(-1) * {deducted.%player%::8}%"
			else:
				message "第 3 筆: &c&l-$%(-1) * {deducted.%player%::3}% 第 8 筆: &a&l+$%{deducted.%player%::8}%"
		else:
			if {deducted.%arg%::8} is smaller than 1:
				message "第 3 筆: &a&l+$%{deducted.%player%::3}% 第 8 筆: &c&l-$%(-1) * {deducted.%player%::8}%"
			else:
				message "第 3 筆: &a&l+$%{deducted.%player%::3}% 第 8 筆: &a&l+$%{deducted.%player%::8}%"
		if {deducted.%arg%::4} is smaller than 1:
			if {deducted.%arg%::9} is smaller than 1:
				message "第 4 筆: &c&l-$%(-1) * {deducted.%player%::4}% 第 9 筆: &c&l-$%(-1) * {deducted.%player%::9}%"
			else:
				message "第 4 筆: &c&l-$%(-1) * {deducted.%player%::4}% 第 9 筆: &a&l+$%{deducted.%player%::9}%"
		else:
			if {deducted.%arg%::9} is smaller than 1:
				message "第 4 筆: &a&l+$%{deducted.%player%::4}% 第 9 筆: &c&l-$%(-1) * {deducted.%player%::9}%"
			else:
				message "第 4 筆: &a&l+$%{deducted.%player%::4}% 第 9 筆: &a&l+$%{deducted.%player%::9}%"
		if {deducted.%arg%::5} is smaller than 1:
			if {deducted.%arg%::10} is smaller than 1:
				message "第 5 筆: &c&l-$%(-1) * {deducted.%player%::5}% 第 10 筆: &c&l-$%(-1) * {deducted.%player%::10}%"
			else:
				message "第 5 筆: &c&l-$%(-1) * {deducted.%player%::5}% 第 10 筆: &a&l+$%{deducted.%player%::10}%"
		else:
			if {deducted.%arg%::10} is smaller than 1:
				message "第 5 筆: &a&l+$%{deducted.%player%::5}% 第 10 筆: &c&l-$%(-1) * {deducted.%player%::10}%"
			else:
				message "第 5 筆: &a&l+$%{deducted.%player%::5}% 第 10 筆: &a&l+$%{deducted.%player%::10}%"

command /msetentry <player=%player%> <number> <text>:
	description: set entry area of a player
	usage: /mseten <player> <entry zone> <entry station abbreviation>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mseten
	trigger:
		set {enter.%arg-1%::1} to arg-2
		set {enter.%arg-1%::2} to arg-3
		set {enter.%arg-1%::3} to 00
		set {onstation.%player%} to true
		if {staff.%arg-1%} is true:
			delete {onstation.%arg-1%}
		message "[<red>MineStile<white>] 成功把 %arg-1% 的入閘區設為 %arg-2%"
		message "[<red>MineStile<white>] 你的入閘區已設為 %arg-2%" to arg-1
		message "<white>[MineStile INFO] Entry zone of %arg-1% is being set to %arg-2%, action performed by %player%" to console
				
command /mclearentry <player=%player%>:
	description: clear entry record of a player
	usage: /mclren <player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mclren 
	trigger:
		if {onstation.%arg%} is not set:
			message "[<red>MineStile<white>] 錯誤: 此玩家沒有入閘紀錄"
		else:
			delete {onstation.%arg%}
			message "[<red>MineStile<white>] 成功註銷 %arg% 的入閘紀錄"
			message "[<red>MineStile<white>] 你的入閘紀錄已成功被註銷" to arg
			message "<white>[MineStile <orange>ALERT<white>] Entry record of %arg% is being CANCELLED, action performed by %player%" to console

command /msetbalance <player=%player%> <number>:
	description: set balance of a player
	usage: /msetbal <player> <amount>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /msetbal
	trigger:
		set {oldbal.%arg-1%} to {balance.%arg-1%}
		set {balance.%arg-1%} to arg-2
		set {deducted.%arg-1%::10} to {deducted.%arg-1%::9}
		set {deducted.%arg-1%::9} to {deducted.%arg-1%::8}
		set {deducted.%arg-1%::8} to {deducted.%arg-1%::7}
		set {deducted.%arg-1%::7} to {deducted.%arg-1%::6}
		set {deducted.%arg-1%::6} to {deducted.%arg-1%::5}
		set {deducted.%arg-1%::5} to {deducted.%arg-1%::4}
		set {deducted.%arg-1%::4} to {deducted.%arg-1%::3}
		set {deducted.%arg-1%::3} to {deducted.%arg-1%::2}
		set {deducted.%arg-1%::2} to {deducted.%arg-1%::1}
		set {deducted.%arg-1%::1} to ({balance.%arg-1%} - {oldbal.%arg-1%})
		delete {oldbal.%arg-1%}
		message "[<red>MineStile<white>] 成功把 %arg-1% 的餘額設為 $%arg-2%"
		message "[<red>MineStile<white>] 你的餘額已被設為 $%arg-2%" to arg-1
		message "<white>[MineStile <orange>ALERT<white>] Balance of %arg-1% is being set to %arg-2%, action performed by %player%" to console
				
command /maddvalue <player=%player%> <number>:
	description: add balance for a player
	usage: /maddv <player> <amount>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /maddv
	trigger:
		add arg-2 to {balance.%arg-1%}
		set {deducted.%arg-1%::10} to {deducted.%arg-1%::9}
		set {deducted.%arg-1%::9} to {deducted.%arg-1%::8}
		set {deducted.%arg-1%::8} to {deducted.%arg-1%::7}
		set {deducted.%arg-1%::7} to {deducted.%arg-1%::6}
		set {deducted.%arg-1%::6} to {deducted.%arg-1%::5}
		set {deducted.%arg-1%::5} to {deducted.%arg-1%::4}
		set {deducted.%arg-1%::4} to {deducted.%arg-1%::3}
		set {deducted.%arg-1%::3} to {deducted.%arg-1%::2}
		set {deducted.%arg-1%::2} to {deducted.%arg-1%::1}
		set {deducted.%arg-1%::1} to arg-2
		message "[<red>MineStile<white>] 成功把 %arg-1% 的餘額增加 $%arg-2% , 新餘額: $%{balance.%arg-1%}%"
		message "[<red>MineStile<white>] 增值成功, 增值額: $%arg-2% , 新餘額: $%{balance.%arg-1%}%" to arg-1
		message "<white>[MineStile INFO] $%arg-1% is added to %arg-2%'s balance, new balance: $%{balance.%arg-1%}%, action performed by %player%" to console

command /mexitonly <player=%player%> <text>:
	description: give exit-only ticket
	usage: /meonly <player> <exit zone>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /meonly
	trigger:
		if arg-1 is not set:		
			message "[<red>MineStile<white>] 錯誤: 請輸入玩家名稱"
			message "<white>[MineStile <red>ERROR<white>] %player% failed to Issue Exit-Only Ticket. REASON: Player not specified." to console
			stop
		if arg-2 is not set:
			message "[<red>MineStile<white>] 錯誤: 請輸入出閘車站"
			message "<white>[MineStile <red>ERROR<white>] %player% failed to Issue Exit-Only Ticket to %arg-1%. REASON: Exit Station not specified." to console
			stop
		execute console command "/give %arg-1% minecraft:paper 1 0 {display:{Name:""Exit-Only Ticket"",Lore:[""%arg-2%""]},ench:[{id:34,lvl:5}]}"
		message "[<red>MineStile<white>] 成功發出供 %arg-2% 使用的出閘專用票予 %arg-1%"
		message "[<red>MineStile<white>] 已發出出閘專用票" to arg-1
		message "<white>[MineStile INFO] Exit-Only Ticket of %arg-2% Issued to %arg-1%, action performed by %player%" to console

command /mclose <text>:
	description: close a station
	usage: /mcl <Staion Abbreviation>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mcl
	trigger:
		loop blocks in radius 100 around the command sender:
			if line 2 of loop-block contains "%arg%":
				if line 1 of loop-block is not "[MineStileStat]":
					if line 3 of loop-block contains "A.":
						set block below the loop-block to red wool
					else if line 4 of loop-block contains "&b":
						set block below the loop-block to redstone block
					else if line 1 of loop-block is "[MineStileInW]":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "A. InW"
						set line 4 of loop-block to "&c&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
						
					else if line 1 of loop-block is "[MineStileInWT]":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "A. InWT"
						set line 4 of loop-block to "&c&lMineStile"
						set block below the block 3 blocks behind loop-block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right loop-block to redstone block
					
					else if line 1 of loop-block is "[MineStileInN]":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "A. InN"
						set line 4 of loop-block to "&c&lMineStile"
						set block below the loop-block to redstone block
						
					else if line 3 of loop-block contains "InW":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 4 of loop-block to "&c&lMineStile"
						if line 3 of loop-block contains "WT":
							set line 3 of loop-block to "A. InWT D"
						else:
							if block below loop-block is redstone block:
								set line 3 of loop-block to "A. InW S"
							else:
								set line 3 of loop-block to "A. InW D"
							set block below the loop-block to redstone block
							set block below the block 3 blocks right loop-block to redstone block
					else if line 3 of loop-block is "InN":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 4 of loop-block to "&c&lMineStile"
						if block below loop-block is redstone block:	
							set line 3 of loop-block to "A. InN S"
						else:	
							set line 3 of loop-block to "A. InN D"
						set block below the loop-block to redstone block
					else if line 1 of loop-block is "[MineStileOutW]":
						set line 4 of loop-block to "&b&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
					else if line 1 of loop-block is "[MineStileOutWT]":
						set line 4 of loop-block to "&b&lMineStile"
						set block below the block 3 blocks behind loop-block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right loop-block to redstone block
					else if line 1 of loop-block is "[MineStileOutN]":
						set line 4 of loop-block to "&b&lMineStile"
					else if line 3 of loop-block contains "OutW":
						if line 3 of loop-block contains "WT":
							set line 1 of loop-block to "[MineStileOutWT]"
							set line 3 of loop-block to "&a&l請拍卡/車票"
							set line 4 of loop-block to "&b&lMineStile DW."
						else:
							set line 1 of loop-block to "[MineStileOutW]"
							set line 3 of loop-block to "&a&l請拍卡/車票"
							if block below loop-block is redstone block:
								set line 4 of loop-block to "&b&lMineStile IW."
							else:
								set line 4 of loop-block to "&b&lMineStile DW."
							set block below the loop-block to redstone block
							set block below the block 3 blocks right loop-block to redstone block
					else if line 3 of loop-block is "OutN":
						set line 1 of loop-block to "[MineStileOutN]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						if block below loop-block is redstone block:	
							set line 4 of loop-block to "&b&lMineStile I."
						else:	
							set line 4 of loop-block to "&b&lMineStile D."
						set block below the loop-block to redstone block
		loop blocks in radius 100 around the command sender:
			if line 1 of loop-block is "[MineStileStat]":
				if line 2 of loop-block contains arg:
					if line 3 of loop-block contains "Mode":
						set line 4 of loop-block to "&d&lStat: &c&lClosed"
						set block 2 blocks behind loop-block to redstone block
		message "[<red>MineStile<white>] 此車站已被成功關閉"
		message "<white>[MineStile INFO] Station CLOSED, action performed by %player%" to console

command /mopen <text>:
	description: open a station
	usage: /mop <Station Abbreviation>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mop
	trigger:
		loop blocks in radius 100 around the command sender:
			if line 2 of loop-block contains "%arg%":
				if line 1 of loop-block is not "[MineStileStat]":
					if line 3 of loop-block is "A. InW":
						set line 1 of loop-block to "[MineStileInW]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
					else if line 3 of loop-block is "A. InN":
						set line 1 of loop-block to "[MineStileInN]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set block below the loop-block to redstone block
					else if line 3 of loop-block is "A. InW S":
						set line 3 of loop-block to "InW"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
					else if line 3 of loop-block is "A. InN S":
						set line 3 of loop-block to "InN"
						set block below the loop-block to redstone block
					else if line 3 of loop-block is "A. InWT":
						set line 1 of loop-block to "[MineStileInWT]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set block below the block 3 blocks behind loop-block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right loop-block to redstone blocks
					else if line 3 of loop-block is "A. InWT D":
						set line 3 of loop-block to "InWT"
					else if line 3 of loop-block is "A. InW D":
						set line 3 of loop-block to "InW"
						set block below the loop-block to red wool
						set block below the block 3 blocks right loop-block to red wool
					else if line 3 of loop-block is "A. InN D":
						set line 3 of loop-block to "InN"
						set block below the loop-block to red wool
					else if line 4 of loop-block contains "&b&lMineStile":
						if line 4 of loop-block contains "W":
							if line 1 of loop-block contains "WT":
								if line 4 of loop-block contains "DW.":
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "OutWT"
							else:
								if line 4 of loop-block contains "IW.":
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "OutW"
									set block below the loop-block to redstone block
									set block below the block 3 blocks right loop-block to redstone block
								else if line 4 of loop-block contains "DW.":
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "OutW"
									set block below the loop-block to red wool
									set block below the block 3 blocks right loop-block to red wool
						else:
							if line 1 of loop-block is "[MineStileOutW]":
								set block below the loop-block to redstone block
								set block below the block 3 blocks right loop-block to redstone block
							else if line 4 of loop-block contains "I.":
								set line 1 of loop-block to "&c&l[暫停使用]"
								set line 3 of loop-block to "OutN"
								set block below the loop-block to redstone block							
							else if line 4 of loop-block contains "D.":
								set line 1 of loop-block to "&c&l[暫停使用]"
								set line 3 of loop-block to "OutN"
								set block below the loop-block to red wool
							else if line 1 of loop-block is "[MineStileOutN]":
								set block below the loop-block to redstone block
					set line 4 of loop-block to "&d&lMineStile"
		loop blocks in radius 100 around the command sender:
			if line 1 of loop-block is "[MineStileStat]":
				if line 2 of loop-block contains arg:
					if line 3 of loop-block contains "Mode":
						set line 4 of loop-block to "&d&lStat: &a&lNormal"
						set block 2 blocks behind loop-block to air
		message "[<red>MineStile<white>] 此車站已被成功開啟"
		message "<white>[MineStile INFO] Station OPENED, action performed by %player%" to console

command /mpin <number> <number> <number=-1>:
	description: set password of staff for entering the CuC
	usage: /mpin <new PIN> <confirm new PIN> [old PIN if exists]
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	trigger:
		if {staff.%player%} is not set:
			message "[<red>MineStile<white>] 錯誤: 你不是職員"
			message "<white>[MineStile <red>ERROR<white>] %player% failed to set CuC Password. REASON: Not a Staff." to console
		else:
			if {cucpw.%player%} is set:
				if {cucpw.%player%} is arg-3: 
					if arg-1 = arg-2:
						set {cucpw.%player%} to arg-2
						message "[<red>MineStile<white>] 已設置密碼"
						message "<white>[MineStile INFO] CuC Password of %player% is set to %arg-2%" to console
					else:
						message "[<red>MineStile<white>] 錯誤: 確認密碼不符"
						message "<white>[MineStile <red>ERROR<white>] %player% failed to set CuC Password. REASON: Password verifying is incorrect." to console
				else:
					message "[<red>MineStile<white>] 錯誤: 舊密碼不符"
					message "<white>[MineStile <red>ERROR<white>] %player% failed to set CuC Password. REASON: Old Password is incorrect." to console
			else:
				if arg-1 = arg-2:
					set {cucpw.%player%} to arg-2
					message "[<red>MineStile<white>] 已設置密碼"
					message "<white>[MineStile INFO] CuC Password of %player% is set to %arg-2%" to console
				else:
					message "[<red>MineStile<white>] 錯誤: 確認密碼不符"
					message "<white>[MineStile <red>ERROR<white>] %player% failed to set CuC Password. REASON: Password verifying is incorrect." to console
								
command /mcuc <number>:
	description: For staff entering password before entering the CuC
	usage: /mcuc <password>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	trigger:
		if {staff.%player%} is true:
			if {cuc.%player%} is not set:
				if arg = {cucpw.%player%}:
					set {cuc.%player%} to true
				else:
					set {cuc.%player%} to false
command /msinglejourneyticket <player=%player%> <number> <number>:
	description: Issue single journey ticket
	usage: /msjt <player> <entry zone> <exit zone>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /msjt
	trigger:
		if arg-1 is not set:		
			message "[<red>MineStile<white>] 錯誤: 請輸入玩家名稱"
			message "<white>[MineStile <red>ERROR<white>] %player% failed to Issue Single Journey Ticket. REASON: Player not specified." to console
			stop
		if arg-2 is not set:
			message "[<red>MineStile<white>] 錯誤: 請輸入入閘區域"
			message "<white>[MineStile <red>ERROR<white>] %player% failed to Issue Single Journey Ticket to %arg-1%. REASON: Entry Zone not specified." to console
			stop
		if arg-2 is not set:
			message "[<red>MineStile<white>] 錯誤: 請輸入出閘區域"
			message "<white>[MineStile <red>ERROR<white>] %player% failed to Issue Single Journey Ticket to %arg-1%. REASON: Exit Zone not specified." to console
			stop
		set {sjcdeduct.%arg-1%} to 0
		add arg-3 to {sjcdeduct.%arg-1%}
		subtract arg-3 from {sjcdeduct.%arg-1%}
		subtract 1 from {sjcdeduct.%arg-1%}			
		set {sjcdeduct.%arg-1%} to (({sjcdeduct.%arg-1%}^2)^0.5) *3.4
		if arg-1's money is smaller than {sjcdeduct.%arg-1%}:
			message "[<red>MineStile<white>] 錯誤: 玩家沒有足夠金錢"
			message "<white>[MineStile <red>ERROR<white>] %player% failed to Issue Single Journey Ticket to %arg-1%. REASON: Insufficient Money." to console
			delete {sjcdeduct.%arg-1%}
			stop
		if {staff.%arg-1%} is not set:
			remove {sjcdeduct.%arg-1%} from arg-1's money
		execute console command "/give %arg-1% minecraft:paper 1 0 {display:{Name:""Single Journey Ticket"",Lore:[""%arg-2%"",""%arg-3%""]},ench:[{id:34,lvl:5}]}"
		if {staff.%arg-1%} is not set:
			message "[<red>MineStile<white>] 單程票成功售予 %arg-1%，費用 $%{sjcdeduct.%arg-1%}%"
			message "[<red>MineStile<white>] 成功購買單程票，費用: $%{sjcdeduct.%arg-1%}%，剩餘金錢: %arg-1's balance%" to arg-1
		else:
			message "[<red>MineStile<white>] 成功贈送單程票予職員 %arg-1%，原費用 $%{sjcdeduct.%arg-1%}%"
			message "[<red>MineStile<white>] 已被贈送單程票，原費用: $%{sjcdeduct.%arg-1%}%，剩餘金錢: %arg-1's balance%" to arg-1

		message "<white>[MineStile INFO] Single Journey Ticket of %arg-2% to %arg-3% Issued to %arg-1%, action performed by %player%" to console
		delete {sjcdeduct.%player%}
				
command /mfreewheel <text>:
	description: Free Wheel the Gates of a station
	usage: /mfw <Station Abbreviation>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mfw
	trigger:
		loop blocks in radius 100 around the command sender:
			if line 2 of loop-block contains "%arg%":
				if line 1 of loop-block is not "[MineStileStat]":
					if line 1 of loop-block is "[MineStileInW]":
						set line 1 of loop-block to "&c&l[不准進入]"
						set line 3 of loop-block to "F. InW"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the loop-block to red wool
						set block below the block 3 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to air
						set block below the block 2 blocks right loop-block to air
					else if line 1 of loop-block is "[MineStileOutW]":
						set line 1 of loop-block to "&a&l[請離開]"
						set line 3 of loop-block to "F. OutW"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the loop-block to light green wool
						set block below the block 3 blocks right loop-block to light green wool
						set block 3 blocks below the block 1 blocks right loop-block to redstone block
						set block 3 blocks below the block 2 blocks right loop-block to redstone block
						set block below the block 1 blocks right loop-block to air
						set block below the block 2 blocks right loop-block to air
					else if line 1 of loop-block is "[MineStileInN]":
						set line 1 of loop-block to "&c&l[不准進入]"
						set line 3 of loop-block to "F. InN"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the loop-block to red wool
						set block below the block 1 blocks right loop-block to air
					else if line 1 of loop-block is "[MineStileOutN]":
						set line 1 of loop-block to "&a&l[請離開]"
						set line 3 of loop-block to "F. OutN"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the loop-block to light green wool
						set block 3 blocks below the block 1 blocks right loop-block to redstone block
						set block below the block 1 blocks right loop-block to air
					else if line 1 of loop-block is "[MineStileInWT]":
						set line 1 of loop-block to "&c&l[不准進入]"
						set line 3 of loop-block to "F. InWT"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the block 1 blocks right loop-block to air
						set block below the block 2 blocks right loop-block to air
					else if line 1 of loop-block is "[MineStileOutWT]":
						set line 1 of loop-block to "&a&l[請離開]"
						set line 3 of loop-block to "F. OutWT"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block 3 blocks below the block 1 blocks right loop-block to redstone block
						set block 3 blocks below the block 2 blocks right loop-block to redstone block
						set block below the block 1 blocks right loop-block to air
						set block below the block 2 blocks right loop-block to air
						
					else if line 1 of the loop-block is "[MineStileStfw]":
						set line 1 of loop-block to "MineStileStfw"
						set line 3 of loop-block to "&a&l請離開"
						set line 4 of the loop-block to "&6&lMineStile"
						set block below the loop-block to light green wool
						set block below the block behind the loop-block to redstone block
					else if line 3 of loop-block contains "InW":
						set line 1 of loop-block to "&c&l[不准進入]"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the block 1 blocks right loop-block to air
						set block below the block 2 blocks right loop-block to air
						if line 3 of loop-block contains "WT":
							set line 3 of loop-block to "F. InWT D"
						else:
							if block below loop-block is redstone block:
								set line 3 of loop-block to "F. InW S"
							else:
								set line 3 of loop-block to "F. InW D"
							set block below the loop-block to red wool
							set block below the block 3 blocks right loop-block to red wool
						
					else if line 3 of loop-block contains "OutW":
						set line 1 of loop-block to "&a&l[請離開]"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the block 1 blocks right loop-block to air
						set block below the block 2 blocks right loop-block to air
						if line 3 of loop-block contains "WT":
							set line 3 of loop-block to "F. OutWT D"
							set block 3 blocks below the block 1 blocks right loop-block to redstone block
							set block 3 blocks below the block 2 blocks right loop-block to redstone block
						else:
							if block below loop-block is redstone block:	
								set line 3 of loop-block to "F. OutW S"
							else:
								set line 3 of loop-block to "F. OutW D"
							set block below the loop-block to light green wool
							set block below the block 3 blocks right loop-block to light green wool
							set block 3 blocks below the block 1 blocks right loop-block to redstone block
							set block 3 blocks below the block 2 blocks right loop-block to redstone block
					else if line 3 of loop-block is "InN":
						set line 1 of loop-block to "&c&l[不准進入]"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the block 1 blocks right loop-block to air
						if block below loop-block is redstone block:	
							set line 3 of loop-block to "F. InN S"
						else:	
							set line 3 of loop-block to "F. InN D"
						set block below the loop-block to red wool
					else if line 3 of loop-block is "OutN":
						set line 1 of loop-block to "&a&l[請離開]"
						set line 4 of loop-block to "&c&l車站關閉 立即離開"
						set block below the block 1 blocks right loop-block to air
						if block below loop-block is redstone block:
							set line 3 of loop-block to "F. OutN S"
						else:
							set line 3 of loop-block to "F. OutN D"	
						set block below the loop-block to light green wool
						set block 3 blocks below the block 1 blocks right loop-block to redstone block
					else if line 3 of loop-block is "Stfw":
						set line 1 of loop-block to "MineStileStfw"
						set line 3 of loop-block to "&a&l請離開"
						if block below loop-block is red wool:	
							set line 1 of loop-block to "MineStileStfwS"
						else:
							set line 1 of loop-block to "MineStileStfwD"
						set block below the loop-block to light green wool
						set block below the block behind the loop-block to redstone block
						
		loop blocks in radius 100 around the command sender:
			if line 1 of loop-block is "[MineStileStat]":
				if line 2 of loop-block contains arg:
					if line 3 of loop-block contains "Mode":
						set line 4 of loop-block to "&d&lStat: &c&lF. W."
						set block 2 blocks behind loop-block to redstone block
		message "[<red>MineStile<white>] 成功把 %arg% 的所有閘機設為緊急疏散模式"
		message "<white>[MineStile <orange>ALERT<white>] Gates of %arg% are free-wheeled, Action performed by %player%" to console
command /munfreewheel <text>:
	description: Free Wheel the Gates of a station
	usage: /mufw <Station Abbreviation>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mufw
	trigger:
		loop blocks in radius 100 around the command sender:
			if line 2 of loop-block contains "%arg%":
				if line 1 of loop-block is not "[MineStileStat]":
					if line 3 of loop-block is "F. InWT":
						set line 1 of loop-block to "[MineStileInWT]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the block 3 blocks behind loop-block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right loop-block to redstone block
						set block below the block 1 blocks right loop-block to light weighted pressure plate
						set block below the block 2 blocks right loop-block to light weighted pressure plate
					else if line 3 of loop-block is "F. OutWT":
						set line 1 of loop-block to "[MineStileOutWT]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the block 3 blocks behind loop-block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right loop-block to redstone block	
						set block 3 blocks below the block 1 blocks right loop-block to red wool
						set block 3 blocks below the block 2 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to heavy weighted pressure plate
						set block below the block 2 blocks right loop-block to heavy weighted pressure plate
					else if line 3 of loop-block is "F. InWT D":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "InWT"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the block 1 blocks right loop-block to light weighted pressure plate
						set block below the block 2 blocks right loop-block to light weighted pressure plate
					else if line 3 of loop-block is "F. OutWT D":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "OutWT"
						set line 4 of loop-block to "&d&lMineStile"
						set block 3 blocks below the block 1 blocks right loop-block to red wool
						set block 3 blocks below the block 2 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to heavy weighted pressure plate
						set block below the block 2 blocks right loop-block to heavy weighted pressure plate
					else if line 3 of loop-block is "F. InW":
						set line 1 of loop-block to "[MineStileInW]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
						set block below the block 1 blocks right loop-block to light weighted pressure plate
						set block below the block 2 blocks right loop-block to light weighted pressure plate
					else if line 3 of loop-block is "F. OutW":
						set line 1 of loop-block to "[MineStileOutW]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
						set block 3 blocks below the block 1 blocks right loop-block to red wool
						set block 3 blocks below the block 2 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to heavy weighted pressure plate
						set block below the block 2 blocks right loop-block to heavy weighted pressure plate
					else if line 3 of loop-block is "F. InN":
						set line 1 of loop-block to "[MineStileInN]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 1 blocks right loop-block to light weighted pressure plate
					else if line 3 of loop-block is "F. OutN":
						set line 1 of loop-block to "[MineStileOutN]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to redstone block
						set block 3 blocks below the block 1 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to heavy weighted pressure plate
					else if line 1 of loop-block is "MineStileStfw":
						set line 1 of loop-block to "[MineStileStfw]"
						set line 3 of loop-block to "&c&l職員專用"
						set line 4 of loop-block to "&6&lMineStile"
						set block below the loop-block to black wool
						set block below the block behind the loop-block to black wool
					else if line 3 of loop-block is "F. InW S":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "InW"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
						set block below the block 1 blocks right loop-block to light weighted pressure plate
						set block below the block 2 blocks right loop-block to light weighted pressure plate
					else if line 3 of loop-block is "F. OutW S":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "OutW"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
						set block 3 blocks below the block 1 blocks right loop-block to red wool
						set block 3 blocks below the block 2 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to heavy weighted pressure plate
						set block below the block 2 blocks right loop-block to heavy weighted pressure plate
					else if line 3 of loop-block is "F. InN S":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "InN"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 1 blocks right loop-block to light weighted pressure plate
						set block below the block 2 blocks right loop-block to light weighted pressure plate
					else if line 3 of loop-block is "F. OutN S":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "OutN"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to redstone block
						set block 3 blocks below the block 1 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to heavy weighted pressure plate
					else if line 3 of loop-block is "MineStileStfwS":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "Stfw"
						set line 4 of loop-block to "&c&lMineStile"
						set block below the loop-block to red wool
						set block below the block behind the loop-block to red wool
					else if line 3 of loop-block is "F. InW D":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "InW"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to red wool
						set block below the block 3 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to light weighted pressure plate
						set block below the block 2 blocks right loop-block to light weighted pressure plate
					else if line 3 of loop-block is "F. OutW D":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "OutW"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to red wool
						set block below the block 3 blocks right loop-block to red wool
						set block 3 blocks below the block 1 blocks right loop-block to red wool
						set block 3 blocks below the block 2 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to heavy weighted pressure plate
						set block below the block 2 blocks right loop-block to heavy weighted pressure plate
					else if line 3 of loop-block is "F. InN D":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "InN"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to red wool
						set block below the block 1 blocks right loop-block to light weighted pressure plate
					else if line 3 of loop-block is "F. OutN D":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "OutN"
						set line 4 of loop-block to "&d&lMineStile"
						set block below the loop-block to red wool
						set block 3 blocks below the block 1 blocks right loop-block to red wool
						set block below the block 1 blocks right loop-block to heavy weighted pressure plate
					else if line 3 of loop-block is "MineStileStfwD":
						set line 1 of loop-block to ".MineStileStfw."
						set line 3 of loop-block to "&a&l請進入"
						set line 4 of loop-block to "&c&lMineStile"
						set block below the loop-block to light green wool
						set block below the block behind the loop-block to redstone block
		loop blocks in radius 100 around the command sender:
			if line 1 of loop-block is "[MineStileStat]":
				if line 2 of loop-block contains arg:
					if line 3 of loop-block contains "Mode":
						set line 4 of loop-block to "&d&lStat: &a&lNormal"
						set block 2 blocks behind loop-block to air
		message "[<red>MineStile<white>] 成功把 %arg% 的所有閘機回復正常"
		message "<white>[MineStile <orange>ALERT<white>] Gates of %arg% are un-free-wheeled, Action performed by %player%" to console
				
command /maccident <text>:
	description: Set the Gates of a station to Accident Mode
	usage: /mac <Station Abbreviation>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /mac
	trigger:
		loop blocks in radius 100 around the command sender:
			if line 2 of loop-block contains "%arg%":
				if line 1 of loop-block is not "[MineStileStat]":
					if line 3 of loop-block contains "A.":
						set block below the loop-block to red wool
					else if line 4 of loop-block contains "&b":
						set block below the loop-block to redstone block
					else if line 1 of loop-block is "[MineStileInW]":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "A. InW"
						set line 4 of loop-block to "&c&lMineStile"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
						
					else if line 1 of loop-block is "[MineStileInWT]":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "A. InWT"
						set line 4 of loop-block to "&c&lMineStile"
						set block below the block 3 blocks behind loop-block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right loop-block to redstone block
					
					else if line 1 of loop-block is "[MineStileInN]":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 3 of loop-block to "A. InN"
						set line 4 of loop-block to "&c&lMineStile"
						set block below the loop-block to redstone block
						
					else if line 3 of loop-block contains "InW":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 4 of loop-block to "&c&lMineStile"
						if line 3 of loop-block contains "WT":
							set line 3 of loop-block to "A. InWT D"
						else:
							if block below loop-block is redstone block:
								set line 3 of loop-block to "A. InW S"
							else:
								set line 3 of loop-block to "A. InW D"
							set block below the loop-block to redstone block
							set block below the block 3 blocks right loop-block to redstone block
					else if line 3 of loop-block is "InN":
						set line 1 of loop-block to "&c&l[暫停使用]"
						set line 4 of loop-block to "&c&lMineStile"
						if block below loop-block is redstone block:	
							set line 3 of loop-block to "A. InN S"
						else:	
							set line 3 of loop-block to "A. InN D"
						set block below the loop-block to redstone block
					else if line 1 of loop-block is "[MineStileOutW]":
						set line 4 of loop-block to "&b&l不收費出閘"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
					else if line 1 of loop-block is "[MineStileOutWT]":
						set line 4 of loop-block to "&b&l不收費出閘"
						set block below the block 3 blocks behind loop-block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right loop-block to redstone block
					else if line 1 of loop-block is "[MineStileOutN]":
						set line 4 of loop-block to "&b&l不收費出閘"
					else if line 3 of loop-block contains "OutW":
						if line 3 of loop-block contains "WT":
							set line 1 of loop-block to "[MineStileOutWT]"
							set line 3 of loop-block to "&a&l請拍卡/車票"
							set line 4 of loop-block to "&b&l不收費出閘DW"
						else:
							set line 1 of loop-block to "[MineStileOutW]"
							set line 3 of loop-block to "&a&l請拍卡/車票"
							if block below loop-block is redstone block:
								set line 4 of loop-block to "&b&l不收費出閘IW"
							else:
								set line 4 of loop-block to "&b&l不收費出閘DW"
							set block below the loop-block to redstone block
							set block below the block 3 blocks right loop-block to redstone block
					else if line 3 of loop-block is "OutN":
						set line 1 of loop-block to "[MineStileOutN]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						if block below loop-block is redstone block:	
							set line 4 of loop-block to "&b&l不收費出閘I"
						else:	
							set line 4 of loop-block to "&b&l不收費出閘D"
						set block below the loop-block to redstone block
		loop blocks in radius 100 around the command sender:
			if line 1 of loop-block is "[MineStileStat]":
				if line 2 of loop-block contains arg:
					if line 3 of loop-block contains "Mode":
						set line 4 of loop-block to "&d&lStat: &c&lG. W."
						set block 2 blocks behind loop-block to redstone block
		message "[<red>MineStile<white>] 成功把 %arg% 的所有閘機設為事故模式"
		message "<white>[MineStile <orange>ALERT<white>] Gates of %arg% are free-wheeled, Action performed by %player%" to console
command /munaccident <text>:
	description: Free Wheel the Gates of a station
	usage: /muac <Station Abbreviation>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /muac
	trigger:
		loop blocks in radius 100 around the command sender:
			if line 2 of loop-block contains "%arg%":
				if line 1 of loop-block is not "[MineStileStat]":
					if line 3 of loop-block is "A. InW":
						set line 1 of loop-block to "[MineStileInW]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
					else if line 3 of loop-block is "A. InN":
						set line 1 of loop-block to "[MineStileInN]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set block below the loop-block to redstone block
					else if line 3 of loop-block is "A. InW S":
						set line 3 of loop-block to "InW"
						set block below the loop-block to redstone block
						set block below the block 3 blocks right loop-block to redstone block
					else if line 3 of loop-block is "A. InN S":
						set line 3 of loop-block to "InN"
						set block below the loop-block to redstone block
					else if line 3 of loop-block is "A. InWT":
						set line 1 of loop-block to "[MineStileInWT]"
						set line 3 of loop-block to "&a&l請拍卡/車票"
						set block below the block 3 blocks behind loop-block to redstone block
						set block below the block 3 blocks behind the block 3 blocks right loop-block to redstone blocks
					else if line 3 of loop-block is "A. InWT D":
						set line 3 of loop-block to "InWT"
					else if line 3 of loop-block is "A. InW D":
						set line 3 of loop-block to "InW"
						set block below the loop-block to red wool
						set block below the block 3 blocks right loop-block to red wool
					else if line 3 of loop-block is "A. InN D":
						set line 3 of loop-block to "InN"
						set block below the loop-block to red wool
					else if line 4 of loop-block contains "&b&l不收費出閘":
						if line 4 of loop-block contains "W":
							if line 1 of loop-block contains "WT":
								if line 4 of loop-block contains "DW":
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "OutWT"
							else:
								if line 4 of loop-block contains "IW":
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "OutW"
									set block below the loop-block to redstone block
									set block below the block 3 blocks right loop-block to redstone block
								else if line 4 of loop-block contains "DW":
									set line 1 of loop-block to "&c&l[暫停使用]"
									set line 3 of loop-block to "OutW"
									set block below the loop-block to red wool
									set block below the block 3 blocks right loop-block to red wool
						else:
							if line 1 of loop-block is "[MineStileOutW]":
								set block below the loop-block to redstone block
								set block below the block 3 blocks right loop-block to redstone block
							else if line 4 of loop-block contains "I":
								set line 1 of loop-block to "&c&l[暫停使用]"
								set line 3 of loop-block to "OutN"
								set block below the loop-block to redstone block							
							else if line 4 of loop-block contains "D":
								set line 1 of loop-block to "&c&l[暫停使用]"
								set line 3 of loop-block to "OutN"
								set block below the loop-block to red wool
							else if line 1 of loop-block is "[MineStileOutN]":
								set block below the loop-block to redstone block
					set line 4 of loop-block to "&d&lMineStile"
							
		loop blocks in radius 100 around the command sender:
			if line 1 of loop-block is "[MineStileStat]":
				if line 2 of loop-block contains arg:
					if line 3 of loop-block contains "Mode":
						set line 4 of loop-block to "&d&lStat: &a&lNormal"
						set block 2 blocks behind loop-block to air
		message "[<red>MineStile<white>] 成功把 %arg% 的所有閘機回復正常"
		message "<white>[MineStile <orange>ALERT<white>] Gates of %arg% are un-free-wheeled, Action performed by %player%" to console
		
command /memergencyreset <player>:
	description: Reset the emergency status of the player 
	usage: /memer <Player>
	permission: ticket.*
	permission message: [<red>MineStile<white>] 你沒有使用此命令的權限
	aliases: /memer
	trigger:
		message "[<red>MineStile<white>] 已重設 %arg% 的緊急狀態"
		message "<white>[MineStile INFO] Resetted %arg%'s Emergency status , Action performed by %player%" to console
		delete {Emergency.%arg%}
command /delwait:
	trigger:
		delete {wait.%player%}
		
command /test:
	trigger:
		message "%{I.%player%}%,%{oW.%player%}%,%{oI.%player%}%"
		